

将应用部署在QAPP后，您可以使用健康检查功能查看应用实例与业务运行是否正常。本文介绍如何配置健康检查。



# **前提条件**

- 需要先设置 **监听端口**，如果没有设置，高级配置的 **健康检查** 开启按钮置灰不能开启。

  ![img](https://dora-doc.qiniu.com/WX20221103-141713%402x.png)



# **操作步骤**

1. 登录 [容器轻应用平台](https://portal.qiniu.com/dora/qapp)。

2. 在左侧导航栏单击 **具体应用名称**，在顶部菜单栏选择 **版本列表**。

3. 单击【发布新版本】按钮，进入 **创建版本页面**。

4. 点击开启 **高级配置->监控检查**。

   ![img](https://dora-doc.qiniu.com/WX20221103-141559%402x.png)

5. 配置以下参数。

   | 参数         | 说明                                                         |
   | ------------ | ------------------------------------------------------------ |
   | **path**     | 设置访问健康检查url，平台会向该url发送GET请求，并根据返回的http status code是否是200来判断该应用是否健康 。<br>1）如果镜像中没有设置健康检查路径，此处可以为空。 <br/>2）如果镜像中配置了健康检查路径，镜像中配置的健康检查路径是/health，那 **必须** 在此处填 /health。 |
   | **超时限制** | 调用健康检查的时间间隔，单位为秒，取值范围1-30的整数。默认值为3，表示每隔3秒检查一次。 |

   > **说明**
   >
   > - 请确保此处填写的健康检查路径与镜像中设置的健康检查路径一致， **否则会导致镜像无法启动** 。
   
6. 配置完成后，查看您所创建应用版本的详细信息以及资源规格情况，并单击**保存**，应用版本创建成功。

7. 结果验证。

   - 在 **部署管理** 页面，从实例部署列表中选择 **部署ID**，将鼠标移至 **实例数**，可查看实例运行状态。状态说明如下所示。

     | 实例运行状态                                                 | 说明                   |
     | ------------------------------------------------------------ | ---------------------- |
     | 检测成功，应用实例健康，表示实例正常启动 <br>![image](https://dora-doc.qiniu.com/WX20221104-111024%402x.png) |                        |
     | 检测失败，应用实例不健康，表示实例启动失败。                 | 下个版本提供，敬请期待 |

   


