您可以在管理锐智转码预设列表和新建自定义锐智转码预设。

登录 **智能多媒体**，点击左侧【导航栏 -> 预设集】，进入普通转码预设集列表页面。



# **锐智转码预设列表**

![img](https://dora-doc.qiniu.com/perset-22.png)

****

> **1、查询说明：**
> - 按照关键词查询，支持精确检索
>
> **2、列表操作说明**
> - 自定义预设，可进行以下操作：
>   - 复制
>   - 查看
>   - 编辑
>   - 删除



# **新建锐智转码预设**

1.登录【智能多媒体控制台】，进入【预设集->锐智转码预设集】页面。

2.点击右上角的 **新建预设** 按钮。

3.进入 **添加预设详情页**，配置预设参数，包括视频参数、音频参数，配置完成，点击 **保存** 即可完成。

![img](https://dora-doc.qiniu.com/perset-23.png)



> **锐智转码预设参数：**
>
> - 名称：仅支持中文、英文、数字、_、-、. 六种格式，长度不能超过32个字符。
> - 封装格式：mp4、hls、flv。
>   - 当封装格式为 mp4、hls、flv 时，配置项默认为视频参数，音频参数选填。
> - 视频参数
>   - 禁用视频
>   - 编码格式
>   - 码率
>   - crf
>   - 分辨率
>   - 在播放器中宽高比
>   - 视频按比例缩放
>   - 帧率
>   - 关键帧最大间隔
>   - 高级参数：片段截取、视频旋转/翻转、视频马赛克、清除 metadata
> - 音频参数
>   - 禁用音频
>   - 编码格式
>   - 声道数
>   - 采样率
>   - 码率
>   - 高级参数：音频混音、音频替换


# **预设参数说明**
在创建自定义预设时，需要自定义参数，如视频编码格式、视频码率、视频宽高、音频编码格式、音频码率等。下面对各类型参数的关键参数含义及取值范围进行说明。

## **1. 封装格式**

| 中文名                | 参数名称                 | 必填                                                         | 说明                                                         |
| --------------------- | ------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| 封装格式            | `<Format>`          | Y            | 封装格式支持以下四种：mp4、hls、flv   |


## **2. 视频参数**

| 中文名           | 参数名称                 | 必填 | 说明                    |
| ---------------- | ------------------------ | ---- | -------------------------- |
| 启用锐智转码     | `/avsmart/<avsmart> `      | Y    | 锐智转码预设，默认启用。                                                 |
| 禁用视频         | `/vn/<VideoNo>`          | N    | 是否去除视频流，默认保留，勾选禁用视频后，会去除视频流。     |
| 编码格式         | `/vcodec/<VideoCodec>`   | N    | 视频编码格式，支持 H.264。                                   |
| 最大平均码率     | `/smtMaxvbr/<maxvbr>`      | N    | 最大平均码率, 单位：千比特每秒（kbit/s），常用视频比特率：128k 1.25m 5m 等。小于 1k 会默认使用 1k，取值为 [1,100000] ，支持到小数点后一位。 |
| 转码质量等级     | `/smtQuality/<quality> `   | N    | 瘦身时的转码质量等级，整数，取值范围[1,5]，值越大，画面越清晰。 |
| 视频增强         | `/smtEnhance/<Enhance>`    | N    | 视频增强，即AI视频前处理是提升画质的关键所在。由多个算法模块组成，每个模块负责某种画质增强的方向，包括：去编码脏效应、去噪、去毛刺、锐化、对比度增强、饱和度增强、去模糊等等。 |
| 分辨率           | `/s/<Resolution>`        | N    | 0、指定目标视频分辨率，格式为宽 x 高 ，长边取值范围[20,3840]的整数，短边取值范围[20,2160]的整数。1、w、h 都为空时，则和原视频保持一致。2、`w`为空，`h`不为空，则按`h`的值对原视频等比例缩放。`3、w`不为空，`h`为空时，则按`w`的值对原视频等比例缩放。`4、w`、`h`都不为空时，则根据`w`、`h`来缩放。 |
| 在播放器中宽高比 | `/aspect/<Aspect>`       | N    | 该参数为视频在播放器中显示的宽高比，格式为`<width>:<height>`。例如：取值`3:4`表示视频在播放器中播放是`宽:高`=`3:4`（注：此处取值仅为体现演示效果)。 |
| 视频按比例缩放   | `/autoscale/<Autoscale>` | N    | 0、配合分辨率参数使用。1、指定为1时，把视频按原始比例缩放到分辨率指定的矩形框内。2、指定为2时，把视频按分辨率中指定的比例添加黑框后，再等比例缩放到分辨率指定到矩形框内。3、关闭时，会强制缩放到对应分辨率，可能造成视频变形。 |
| 帧率             | `/r/<FrameRate>`         | N    | 0、视频帧率，每秒显示的帧数，单位：赫兹（Hz），常用帧率：24，25，30等，帧率限制大小在 [1，60]。1、取值范围为 `[1,30]的整数，按照普通帧率进行收费。`2、取值范围为 (30 , 60]的整数，按照高帧率进行收费，[参考价格详情](<https://www.qiniu.com/prices?source=dora>)。 |
| 关键帧最大间隔   | `/gop/<GroupOfPictures>` | N    | GOP参数，即视频流关键帧间的间隔帧数，取值[1,3000]的整数；默认为0表示采用指定视频编码格式的默认GOP值，例如libx264格式默认GOP值为250。GOP取值过小会影响视频编码压缩率，码率变大，过大会使图像群组的时长跨度过大，影响播放随机性，故一般建议采用默认值。 | 
	
## **2.1 视频高级参数**

| 类别         | 中文名     | 参数名称                           | 必填 | 说明                                     |
| ------------ | ---------- | ---------------------------------- | ---- | ------------------------------------------------------------ |
| 片段截取     | 开始时间   | `/ss/<SeekStart>`                  | N    | 1、用于音视频截取，从一段音视频中截取一段音视频；2、指定音视频截取的开始时间，单位：秒，支持精确到毫秒，例如3.345s。 |
|              | 截取长度   | `/t/<Duration>`                    | N    | 1、用于视频截取，从一段视频中截取一段视频；2、指定音视频截取的长度，单位：秒，支持精确到毫秒，例如1.500s。 |
| 视频旋转     | 顺时针旋转 | `/rotate/<Degree>`                 | N    | 指定顺时针旋转的度数，可取值为`90`、`180`、`270`、`auto`，默认为 auto。 |
|              | 视频翻转   | `/flip/<Flip>`                     | N    | 视频翻转, 水平翻转 `horizontal`, 垂直翻转 `vertical。`       |
| 视频马赛克   | 马赛克位置 | `/mosaicGravity/<MosaicGravity>`   | N    | 马赛克的位置，参考锚点参数表，默认值为`NorthEast`（右上角）  |
|              | 马赛克位置 | `/mosaicOffsetX/<MosaicOffsetX>`   | N    | 马赛克位置的相对横向偏移量 `，正数则向右偏移，负数向左偏移。` |
|              | 马赛克位置 | `/mosaicOffsetY/<MosaicOffsetY>`   | N    | 马赛克位置的相对纵向偏移量 `，正数则向下偏移，负数向上偏移。` |
|              | 马赛克大小 | `/mosaicSize/<MosaicSize>`         | N    | 马赛克区域大小，即指定马赛克的宽和高。                       |
|              | 起始时间   | `/mosaicStart/<MosaicStart>`       | N    | 马赛克起始时间， 默认为0。                                   |
|              | 持续时间   | `/mosaicDuration/<MosaicDuration>` | N    | 马赛克持续时间， 默认直到片尾                                |
| 清除metadata |            | `/stripmeta/<StripMeta>`           | N    | 是否清除文件的`metadata`，1为清除，0为保留。      |

## **3. 音频参数**

| 中文名   | 参数名称               | 必填 | 说明                                                         |
| -------- | ---------------------- | ---- | ------------------------------------------------------------ |
| 禁用音频 | `/an/<AudioNo>`        | N    | 是否去除音频流，0为保留，1为去除。默认值为0。                |
| 编码格式 | `/acodec/<AudioCodec>` | N    | 1、音频编码格式，支持 MP3 、AAC 、AAC_HE。2、为空时，与源视频一致 |
| 声道数   | `/ac/<ChannelNum>`     | N    | 1、音频声道数量，单位：整数值，输出文件的声道数不能大于输入源的声道数量；2、目前 acodec 为 aac 时，支持的声道数量为 1、2、4、5、6、8，其他数值不合法；3、acodec 为mp3 时，支持的声道数量为 1、2，其他数值不合法。备注：当编码格式为空时，声道数也为空，默认与源视频一致。 |
| 码率     | `/ab/<BitRate>`        | N    | 1、音频码率，单位：比特每秒（kbit/s），常用码率：64k，128k，192k，256k，320k等，音频码率限制大小为 [1，600]，支持到小数点后一位。2、在不改变音频编码格式时，若指定码率大于原音频码率，则使用原音频码率进行转码。3、勾选【强制使用】，可以强制指定码率进行转码。 |
| 采样率   | `/ar/<SamplingRate>`   | N    | 1、音频采样频率，单位：赫兹（Hz），取值为整数。2、常用音频采样频率有 8000, 11025、12000、16000、22050、24000、32000、44056、44100、47250、48000、50000、64000、88200、96000 等。 |
	

## **3.1 音频高级参数**

| 类别           | 中文名               | 参数名称                                          | 必填 | 说明                                                         |
| -------------- | -------------------- | ------------------------------------------------- | ---- | ------------------------------------------------------------ |
| 音频混音       | 混音文件             | `/amix/<AmixURL>`                                 | N    | 1、期望混音的音视频文件；2、源音视频、混音文件都仅支持单音轨；3、混音的两个音频的 channel 数必须一致。备注：不支持与音频替换同时使用。 |
|                | 开始混音时间         | `/amixOffset/<AmixOffset>`                        | N    | 混音效果起始位置，相对于混音后视频起始位置计算，单位为秒，精确到毫秒，默认取0，即混音后音视频从起始位置起有混音效果 |
|                | 混音文件截取开始时间 | `/amixStart/<AmixStart>`                          | N    | 1、用于混音文件长度截取；2、混音文件截取的开始时间，单位为秒，精确到毫秒；3、默认值为0，即混音文件从起始混入源音视频。 |
|                | 混音文件截取时长     | `/amixDuration/<AmixDuration>`                    | N    | 1、用于混音文件长度截取；2、混音文件截取的时长，单位为秒，精确到毫秒;3、默认为目标混音文件音轨原始长度，即全部混入源音视频。 |
| 音频替换       | 替换文件             | `/multiArep/<MultiAudioReplaceURL>`               | N    | 用于替换原视频音频的音频文件。备注：不支持与音频混音同时使用。 |
|                | 开始替换时间         | `/multiArepOffset/<MultiAudioReplaceOffset>`      | N    | 音频替换起始位置，相对于原视频音频起始位置计算，单位为秒，精确到毫秒，默认取0 |
|                | 替换文件截取开始时间 | `/multiArepStart/<MultiAudioReplaceStart>`        | N    | 1、用于替换文件长度截取；2、替换文件截取的开始时间，单位为秒，精确到毫秒；3、默认值为0，即替换文件从起始混入源音视频。 |
|                | 替换文件截取时长     | `/multiArepDuration /<MultiAudioReplaceDuration>` | N    | 目标音频文件截取的时长，单位为秒，精确到毫秒，默认为目标音频文件音轨原始长度，即全部目标音频替换原视频音频。 |
​
# **其他**
锐智转码的功能简介、使用场景、参数说明，请参考文档[开发指南->锐智转码](/dora/manual/7508/perceptive-transcoding01)