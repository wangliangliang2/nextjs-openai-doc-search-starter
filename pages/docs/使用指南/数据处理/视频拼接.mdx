支持视频拼接，您可通过控制台设置视频拼接。文为您介绍视频视频拼接功能、场景、使用方式、视频拼接参数。


# 简介

视频拼接，用于把多个不同格式 、不同编码、分辨率的视频或者音频拼接在一起，输出成一个格式、编码、分辨率相同的新视频。

> - 不支持m3u8文件的拼接。如果要拼接m3u8文件，建议先对源文件转码后再使用拼接。
> - 常用于添加固定的片头和片尾、直播录制视频拼接。

​

# 使用方式

视频拼接的使用流程如下：

1. 创建视频拼接预设，具体操作，请参见控制台[视频拼接预设](https://portal.qiniu.com/dora/media-gate/preset/concat/create)。

2. 拼接文件添加的顺序代表了拼接顺序。

   ![](https://dora-doc.qiniu.com/WX20201214-144002.png)

2. 使用创建好的视频拼接预设，去创建工作流，具体操作请参考控制台[工作流](https://portal.qiniu.com/dora/media-gate/template/create)。

   ​ 

​
# **视频拼接参数说明**
在创建自定义预设时，需要自定义参数，如视频编码格式、视频码率、视频宽高、音频编码格式、音频码率等。

下面对各类型参数的关键参数含义及取值范围进行说明。


| 中文名           | 参数名称               | 必填 | 说明                                                         |
| ---------------- | ---------------------- | ---- | ------------------------------------------------------------ |
| 拼接文件         |` <encodedUrlN> `         | Y    | 1、除去源文件以外，还可以指定最多20个音视频文件（即总计21个片段)；2、所有拼接文件必须属于同一存储空间；3、可以把要拼接的第一个视频作为key传入，[可参考文档示例](https://developer.qiniu.com/dora/api/1246/audio-and-video-stitching-avconcat)。 |
| 目标视频封装格式 | `<Format>`             | Y    | 目标视频的格式，mp4、flv、mp3，目前不支持 m3u8 文件的拼接。  |
| 目标视频分辨率   | `/s/<Resolution>`      | N    | 指定目标视频分辨率，格式为宽 x 高 ，长边取值范围[20,3840]的整数，短边取值范围[20,2160]的整数。 |
| 源文件拼接位置   | `/index/<Index>`       | N    | 用于设置源文件在拼接时的位置（表示位于第几个视频），默认值为1，表示源文件在拼接时作为第一个视频，最大值为拼接视频的文件数，如果设置的值超过最大值，则会报错。 |
| 峰值码率         | `/maxrate/<Maxrate>`     | N    | 1、使用该参数限制输出视频流的峰值码率，单位：千比特每秒（kbit/s），取值为 [1,100000] 的整数。2、仅对输出格式为 mp4 时有效。 |
| 填充音频流       | `/addAudio/<AddAudio>` | N    | 待拼接视频文件中，是否给没有音频流的视频文件填充空的音频流。默认值为 1，表示填充；值为 0，则表示不填充。 |