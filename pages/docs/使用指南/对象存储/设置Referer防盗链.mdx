对象存储 Kodo 提供设置防盗链功能，同时支持允许白名单访问和阻止黑明单访问的配置，防止数据被他人盗链。
<br>


# **说明**
- 一旦开启 Referer 防盗链，所有请求都会做防盗链验证。更多信息请参考 [Referer 防盗链](/kodo/development_guidelines/8618/dev-preventing-hotlinking)。
- 空间 Referer 防盗链设置仅对源站生效，空间 CDN 加速域名的 Referer 设置请至 [CDN 域名管理](https://portal.qiniu.com/cdn/domain) 配置，详情请参考 CDN [设置 Referer 防盗链](https://developer.qiniu.com/fusion/3839/domain-name-hotlinking-prevention)。
<br>


# **操作步骤**

1. 登录 Kodo 控制台进入[空间管理](https://portal.qiniu.com/kodo/bucket)界面
2. 单击**目标空间名称**进入空间概览，单击**空间设置**进入空间设置界面；或单击目标空间栏**设置**，快速链接至空间设置界面
3. 找到 Referer 防盗链栏，如图1，单击**设置**，右侧将弹出设置 Referer 防盗链界面
图1:
![image2021-8-11_19-19-1.png](https://dn-odum9helk.qbox.me/FuvE5Jok5hCO6u3EYagrVWUPhTND)
4. 单击当前状态：**开启**，即显示图2: Referer 防盗链设置
图2:
![截屏2021-08-10 下午2.26.53.png](https://dn-odum9helk.qbox.me/Ft-o3VsWmDodXvFT6EWUmenYfpmb)
5. 在 Referer 防盗链配置界面，按如下说明配置各项参数
   |操作名称|说明|规则描述|
   |-|-|-|
   |黑白名单配置|请按需选择配置白名单或黑名单| - 白名单：请求的 Referer 字段匹配白名单设置的内容，则允许访问资源，若不匹配，请求会被拒绝访问资源。<br> - 黑名单：请求的 Referer 不匹配黑名单内设置的内容，则允许访问资源，若匹配，请求会被拒绝访问资源。</ul>|
   |Referer	|请按需配置 Referer 参数	| - 一个 Bucket 可以支持多个 Referer 参数。<br> - 支持以下三种 Referer 格式 <ul><li>支持空主机头域名， 比如 foo.com 或 空主机头多级域名，比如 a.b.com;<li>支持域名前使用通配符「 * 」，比如 *.bar.com;<li>支持完全通配符, 即一个「 * 」<li>无需输入 http:// 或 https:// </ul>|
   |允许空 Referer	|请选择是否允许空 Referer	| - 允许空 Referer 开启时，若请求 Referer 字段为空或无 Referer 字段，允许访问资源。<br> - 允许空 Referer 关闭时，若请求 Referer 字段为空或无 Referer 字段，请求会被拒绝访问资源 <br> - 若不允许空 Referer，则只有 HTTP 或 HTTPS header 中包含 Referer 字段的请求才能访问资源。|
   *注： Referer 防盗链配置效果*
   <table>
 <thead>
  <tr align="middle">
    <th colspan="2" rowspan="2"></th>
    <th colspan="2">允许空 Referer</th>
  </tr>
  <tr align="middle">
    <th>开启</th>
    <th>关闭</th>
  </tr>
</thead>
<tbody>
  <tr>
    <td rowspan="2">白名单 Referer 参数</td>
    <td>不为空</td>
    <td>Referer 为空的请求和符合白名单的请求会被允许，其他请求都会被拒绝</td>
    <td>只有 Referer 属于白名单的请求被允许，其他请求（包括 Referer 为空的请求）会被拒绝</td>
  </tr>
  <tr>
    <td>空</td>
    <td colspan="2">空 Referer 的请求被允许，即除黑名单外均允许</td>
  </tr>
  <tr>
    <td rowspan="2">黑名单 Referer 参数</td>
    <td>不为空</td>
    <td>Referer 为空的请求和符合黑名单的请求会被拒绝</td>
    <td>只有 Referer 属于黑名单的请求被拒绝</td>
  </tr>
  <tr>
    <td>空</td>
    <td>空 Referer 的请求被拒绝</td>
    <td>无拒绝请求</td>
  </tr>
  
   </tbody>
   </table>

<br>

<li> 单击<b>确定</b>，即可更新设置信息
<li> Referer 防盗链设置成功后，您也可以<b>关闭</b>当前设定。

   







