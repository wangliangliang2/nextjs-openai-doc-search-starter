伸缩组是弹性伸缩的核心单元。在伸缩组中配置好云主机实例模板并启用伸缩组后，您可以通过伸缩规则自动伸缩云主机实例，也可以手动添加已有的云主机实例。

# 云主机实例模板
云主机实例模板分为两类：自定义伸缩配置和实例启动模板。自动创建云主机实例时，会使用处于生效状态的云主机实例模板。

# 伸缩规则
您可以通过以下方式执行伸缩规则：
* 手动执行
* 根据目标指标自动执行
* 通过定时任务执行 （开发中）
在计算和执行过程中，伸缩规则可以根据伸缩组的MinSize、MaxSize自动调整可以增加或减少的云主机实例数。例如，伸缩规则中指定将伸缩组的云主机实例数调整至50台，但伸缩组MaxSize只有45台，则整个伸缩规则会按调整至45台来计算和执行。

# 伸缩活动
执行伸缩规则、手动添加或删除云主机实例后均会触发伸缩活动，伸缩活动具有以下特点：
* 同一伸缩组内、同一时刻只能有一个伸缩活动在执行。
* 伸缩活动不可以中断。例如，某个创建20台云主机实例的伸缩活动正在执行中，当创建到第5台云主机实例时，您无法强行终止该伸缩活动。
* 伸缩活动有云主机实例加入伸缩组失败时，需要保持云主机实例级事务的完整性，而非伸缩活动级事务的完整性，即只进行云主机实例级回滚，而不是伸缩活动级回滚。例如，当伸缩组创建了20台云主机实例，但只有19台云主机实例成功加入负载均衡时，则只对不成功的1台云主机实例进行自动释放操作。
伸缩活动存在冷却时间，冷却时间具有以下特点：
* 在冷却时间内，伸缩组只会拒绝云监控报警任务类型的伸缩活动请求，其他类型的触发任务（如手工执行伸缩规则、定时任务等）可以绕过冷却时间立即执行伸缩活动。
* 每个伸缩活动的最后一个云主机实例加入或移出伸缩组成功后，整个伸缩组冷却时间才开始计时。

# 创建伸缩组
伸缩组是具有相同应用场景的云主机实例集合。您可以通过伸缩组定义可容纳云主机实例数量的边界值、弹性扩张时创建云主机实例的模板、弹性收缩时移出云主机实例的策略等属性，让伸缩组按照您的需求维护一组云主机实例。您还可以为伸缩组关联负载均衡实例和RDS实例，以便加入伸缩组的云主机实例快速提供服务。


## 前提条件
* 如果需要为伸缩组关联负载均衡实例，请确保满足以下条件：
	* 您持有一个或多个处于运行中状态的负载均衡实例，具体操作请参见创建负载均衡实例。
	* 负载均衡实例和伸缩组必须位于同一地域。
	* 如果负载均衡实例和伸缩组的网络类型均为专有网络，则必须位于同一专有网络。
	* 当负载均衡实例的网络类型为经典网络，伸缩组的网络类型为专有网络时，如果负载均衡实例的后端服务器组中包含专有网络云主机实例，该云主机实例必须与伸缩组位于同一专有网络。
	* 负载均衡实例配置至少一个监听，具体操作请参见监听概述。
	* 负载均衡实例必须开启健康检查，具体操作请参见配置健康检查。
* 如果需要为伸缩组关联RDS实例，请确保满足以下条件：
	* 您持有一个或多个处于运行中状态的RDS实例，具体操作请参见什么是云数据库RDS。
	* RDS实例和伸缩组位于同一地域。


## 操作步骤
1. 登录弹性伸缩控制台
2. 单击 **新建** 按钮，弹出 **新建伸缩组弹框**
3. 设置伸缩组属性
4. 单击提交

伸缩组创建完成后，您需要启用伸缩组才可以将云主机实例添加至伸缩组。

![](https://dn-odum9helk.qbox.me/Fi8tr9rc27bdQmjFeQchLDqvv4iq)

## 属性解释
- 伸缩组内最大实例数
	超过上限时，弹性伸缩会自动移出云主机实例，使得伸缩组内的云主机实例数量等于上限。
- 伸缩组内最小实例数
	低于下限时，弹性伸缩会自动添加云主机实例，使得伸缩组内的云主机实例数量等于下限。
- 默认冷却时间
	单位为秒，伸缩组发生伸缩活动后的默认冷却时间。在冷却时间内，伸缩组会拒绝由云监控报警任务触发的伸缩活动请求，但其他类型任务触发的伸缩活动可以绕过冷却时间立即执行，例如手动执行任务、定时任务。
- 多可用区扩缩容策略
	- 优先级策略 先选择的虚拟交换机优先级高。当伸缩组无法在优先级较高的虚拟交换机所在可用区创建云主机实例时，会自动使用下一优先级的虚拟交换机创建云主机实例。
	- 均衡分布策略 在伸缩组关联多个虚拟交换机且虚拟交换机分布在两个以上可用区时生效，支持在虚拟交换机所在的可用区之间均衡分布云主机实例。如果由于库存不足等原因导致可用区之间云主机实例的数量不均衡，您可以执行再均衡分布操作来平衡云主机实例的分布情况。

# 启用伸缩组

## 前提条件
伸缩组处于 **停用** 状态。

## 操作步骤
1. 登录弹性伸缩控制台。
2. 伸缩组列表页，找到待操作的伸缩组，在操作列中，单击菜单 > 启用。
3. 单击确定。


# 禁用伸缩组

## 前提条件
伸缩组处于 **启用** 状态。

## 背景信息
停用伸缩组之前发生的伸缩活动会继续完成，而停用伸缩组之后发生的伸缩活动会被拒绝。

## 操作步骤
1. 登录弹性伸缩控制台。
2. 伸缩组列表页，找到待操作的伸缩组，在操作列中，单击菜单 > 禁用。
3. 单击确定。

# 编辑伸缩组
创建伸缩组后，如果当前伸缩组属性不再满足需求，您可以直接修改一项或者多项属性，无需重新创建。

## 操作步骤
1. 登录弹性伸缩控制台。
2. 伸缩组列表页，找到待操作的伸缩组，在操作列中，单击菜单 > 编辑。
3. 在弹出的编辑模态框中修改属性。
4. 单击确定。

# 删除伸缩组
如果您不再需要某个伸缩组，您可以将其删除，空出伸缩组配额。

## 前提条件
伸缩组处于 **启用** 状态。

## 背景信息
删除伸缩组会同时删除组内的伸缩配置和伸缩规则。如果伸缩组内存在运行中的云主机实例，弹性伸缩会先停止云主机实例，然后移出所有手动添加的云主机实例并释放所有自动创建的云主机实例。

## 操作步骤
1. 登录弹性伸缩控制台。
2. 伸缩组列表页，找到待操作的伸缩组，在操作列中，单击菜单 > 删除。
3. 单击确定。

