云数据库MongoDB支持3.2版本、3.4版本和4.0版本。3.4版本在性能和安全性等方面较3.2版本均有不同程度的提升，4.0版本更适用于金融等对事务有依赖且使用nosql特性的场景。

## 数据库版本

**MongoDB 3.4版本具有以下优势**

* 更快的主备同步 
    
    三节点副本集实例MongoDB3.4 版本在全量同步数据阶段拷贝数据时，同时为所有数据建立索引。之前的版本中，拷贝数据时先建立id索引，其余的索引在数据拷贝完之后集中建立索引。拷贝数据的同时，把同步源上新产生的oplog拉取到本地local数据库的临时集合存储。数据全量拷贝完后，直接读取本地临时集合的oplog，提升了追增量的效率，避免同步源上oplog不足导致无法同步的问题。
* 更强大的功能：如`Readonly View`、`Collation`、`Decimal type`等。
* 更丰富的aggregation操作：如`$bucket`、`$graghLookup`。

**MongoDB 4.0版本具有以下优势** 
* MongoDB 4.0版将文档模型的速度，灵活性和功能与ACID保证相结合。
* MongoDB 4.0版借助事务特性，使得备节点不再因为同步日志而阻塞读取请求。
* MongoDB 4.0版提供并发的读取和写入能力，使得新增分片shard迁移性能提升了约 40%， 新增节点能更快的承载业务压力。

**说明** 
* 已有实例暂不支持升级至MongoDB 4.0版本，如需使用此版本数据库，请在创建实例时选择数据库版本为MongoDB 4.0。
* 支持在实例运行期间手动升级数据库版本MongoDB 3.2至MongoDB 3.4，但版本升级后不支持降级。
* 升级数据库版本期间，实例会重启一次，实例重启过程中完成数据库版本升级。
* 克隆实例时，MongoDB只支持相同数据库版本之间的克隆，不支持跨版本实例克隆。

## 存储引擎

为最大化满足各类业务场景需求，云数据库MongDB提供了WiredTiger、RocksDB和TerarakDB三中存储引擎供您选择。
