### Rust SDK ä½¿ç”¨æŒ‡å—

Rust SDK åŸºäº<span id="Productname">ä¸ƒç‰›äº‘</span> API å‚è€ƒæ‰‹å†Œæ„å»ºã€‚ä½¿ç”¨æ­¤ SDK æ„å»ºæ‚¨çš„ç½‘ç»œåº”ç”¨ç¨‹åºï¼Œèƒ½è®©æ‚¨ä»¥éå¸¸ä¾¿æ·åœ°æ–¹å¼å°†æ•°æ®å®‰å…¨åœ°å­˜å‚¨åˆ°<span id="Productname">ä¸ƒç‰›äº‘</span>ä¸Šã€‚æ— è®ºæ‚¨çš„ç½‘ç»œåº”ç”¨æ˜¯ä¸€ä¸ªç½‘ç«™ç¨‹åºï¼Œè¿˜æ˜¯åŒ…æ‹¬ä»äº‘ç«¯ï¼ˆæœåŠ¡ç«¯ç¨‹åºï¼‰åˆ°ç»ˆç«¯ï¼ˆæ‰‹æŒè®¾å¤‡åº”ç”¨ï¼‰çš„æ¶æ„çš„æœåŠ¡æˆ–åº”ç”¨ï¼Œé€šè¿‡<span id="Productname">ä¸ƒç‰›äº‘å­˜å‚¨</span>åŠå…¶ SDKï¼Œéƒ½èƒ½è®©æ‚¨åº”ç”¨ç¨‹åºçš„ç»ˆç«¯ç”¨æˆ·é«˜é€Ÿä¸Šä¼ å’Œä¸‹è½½ï¼ŒåŒæ—¶ä¹Ÿè®©æ‚¨çš„æœåŠ¡ç«¯æ›´åŠ è½»ç›ˆã€‚

Rust SDK å±äºæœåŠ¡ç«¯ SDK ä¹‹ä¸€ï¼ŒåŒ…å«ä»¥ä¸‹ç‰¹æ€§ï¼š
- é€šè¿‡æä¾›å¤šä¸ªä¸åŒçš„ Crateï¼Œä¸ºä¸åŒå±‚æ¬¡çš„å¼€å‘éƒ½æä¾›äº†æ–¹ä¾¿æ˜“ç”¨çš„ç¼–ç¨‹æ¥å£ã€‚
- åŒæ—¶æä¾›é˜»å¡ IO æ¥å£å’ŒåŸºäº Async/Await çš„å¼‚æ­¥ IO æ¥å£ã€‚
- æä¾›å¤§é‡çš„å¯ä¾›äºŒæ¬¡å¼€å‘çš„ Traitï¼Œæ–¹ä¾¿çµæ´»å®šåˆ¶ï¼Œä¾‹å¦‚ HTTP å®¢æˆ·ç«¯æä¾›äº† `ureq`ï¼Œ`reqwest` å’Œ `isahc` ä¸‰ç§ä¸åŒçš„åº“å®ç°ï¼Œä¹Ÿå¯ä»¥åŸºäº `qiniu-http` è‡ªè¡Œå®šåˆ¶å¼€å‘æ¥å…¥å…¶ä»– HTTP å®¢æˆ·ç«¯å®ç°ï¼›åˆä¾‹å¦‚ DNS å®¢æˆ·ç«¯æä¾›äº† `libc`ï¼Œ`c-ares`ï¼Œ`trust-dns` ä¸‰ç§ä¸åŒçš„åº“å®ç°ï¼Œä¹Ÿå¯ä»¥åŸºäº [Resolver](https://docs.rs/qiniu-http-client/latest/qiniu_http_client/trait.Resolver.html) è‡ªè¡Œå®šåˆ¶å¼€å‘æ¥å…¥å…¶ä»– DNS å®¢æˆ·ç«¯å®ç°ã€‚

# å¼€æº

- [Rust SDK é¡¹ç›®åœ°å€](https://github.com/qiniu/rust-sdk)
- [Rust SDK å‘å¸ƒåœ°å€](https://github.com/qiniu/rust-sdk/releases)

# å®‰è£…

Qiniu SDK for Rust åŒ…å«ä»¥ä¸‹ Crates:

| Crate é“¾æ¥                                                                                                                            | æ–‡æ¡£                                                                                                   | æè¿°                                                                                                                                                                                                                                                                               |
| ------------------------------------------------------------------------------------------------------------------------------------- | ------------------------------------------------------------------------------------------------------ | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| [![qiniu-etag](https://img.shields.io/crates/v/qiniu-etag.svg)](https://crates.io/crates/qiniu-etag)                                  | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-etag)            | Etag ç®—æ³•åº“ï¼Œå®ç°ä¸ƒç‰› Etag ç®—æ³•                                                                                                                                                                                                                                                    |
| [![qiniu-credential](https://img.shields.io/crates/v/qiniu-credential.svg)](https://crates.io/crates/qiniu-credential)                | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-credential)      | ä¸ƒç‰›è®¤è¯åº“ï¼Œå®ç°ä¸ƒç‰›è®¤è¯æ¥å£ä»¥åŠç­¾åç›¸å…³ç®—æ³•                                                                                                                                                                                                                                       |
| [![qiniu-upload-token](https://img.shields.io/crates/v/qiniu-upload-token.svg)](https://crates.io/crates/qiniu-upload-token)          | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-upload-token)    | ä¸ƒç‰›ä¸Šä¼ å‡­è¯ï¼Œå®ç°ä¸ƒç‰›ä¸Šä¼ ç­–ç•¥å’Œä¸Šä¼ å‡­è¯æ¥å£ä»¥åŠç›¸å…³ç®—æ³•                                                                                                                                                                                                                           |
| [![qiniu-http](https://img.shields.io/crates/v/qiniu-http.svg)](https://crates.io/crates/qiniu-http)                                  | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-http)            | ä¸ƒç‰›å®¢æˆ·ç«¯ HTTP æ¥å£ï¼Œä¸ºä¸åŒçš„ HTTP å®¢æˆ·ç«¯å®ç°æä¾›ç›¸åŒçš„åŸºç¡€æ¥å£                                                                                                                                                                                                                   |
| [![qiniu-ureq](https://img.shields.io/crates/v/qiniu-ureq.svg)](https://crates.io/crates/qiniu-ureq)                                  | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-ureq)            | åŸºäº [Ureq](https://docs.rs/ureq) åº“å®ç°ä¸ƒç‰›å®¢æˆ·ç«¯ HTTP æ¥å£ï¼Œå¯¹äºä½¿ç”¨ `qiniu-http-request`ï¼Œ`qiniu-apis`ï¼Œ`qiniu-objects-manager` æˆ– `qiniu-upload-manager` çš„ç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥å¯ç”¨ `ureq` åŠŸèƒ½ï¼Œå°†é»˜è®¤ä½¿ç”¨è¯¥ HTTP å®¢æˆ·ç«¯å®ç°ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œå¦‚æœéœ€è¦ä½¿ç”¨å¼‚æ­¥æ¥å£ï¼Œåˆ™ä¸èƒ½é€‰æ‹© `ureq` |
| [![qiniu-isahc](https://img.shields.io/crates/v/qiniu-isahc.svg)](https://crates.io/crates/qiniu-isahc)                               | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-isahc)           | åŸºäº [Isahc](https://docs.rs/isahc) åº“å®ç°ä¸ƒç‰›å®¢æˆ·ç«¯ HTTP æ¥å£ï¼Œå¯¹äºä½¿ç”¨ `qiniu-http-request`ï¼Œ`qiniu-apis`ï¼Œ`qiniu-objects-manager` æˆ– `qiniu-upload-manager` çš„ç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥å¯ç”¨ `isahc` åŠŸèƒ½ï¼Œå°†é»˜è®¤ä½¿ç”¨è¯¥ HTTP å®¢æˆ·ç«¯å®ç°                                                     |
| [![qiniu-reqwest](https://img.shields.io/crates/v/qiniu-reqwest.svg)](https://crates.io/crates/qiniu-reqwest)                         | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-reqwest)         | åŸºäº [Reqwest](https://docs.rs/reqwest) åº“å®ç°ä¸ƒç‰›å®¢æˆ·ç«¯ HTTP æ¥å£ï¼Œå¯¹äºä½¿ç”¨ `qiniu-http-request`ï¼Œ`qiniu-apis`ï¼Œ`qiniu-objects-manager` æˆ– `qiniu-upload-manager` çš„ç”¨æˆ·ï¼Œå¯ä»¥ç›´æ¥å¯ç”¨ `reqwest` åŠŸèƒ½ï¼Œå°†é»˜è®¤ä½¿ç”¨è¯¥ HTTP å®¢æˆ·ç«¯å®ç°                                               |
| [![qiniu-http-client](https://img.shields.io/crates/v/qiniu-http-client.svg)](https://crates.io/crates/qiniu-http-client)             | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-http-client)     | åŸºäº [qiniu-http](https://docs.rs/qiniu-http) æä¾›å…·æœ‰é‡è¯•åŠŸèƒ½çš„ HTTP å®¢æˆ·ç«¯                                                                                                                                                                                                       |
| [![qiniu-apis](https://img.shields.io/crates/v/qiniu-apis.svg)](https://crates.io/crates/qiniu-apis)                                  | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-apis)            | å®ç°ä¸ƒç‰› API è°ƒç”¨å®¢æˆ·ç«¯æ¥å£                                                                                                                                                                                                                                                        |
| [![qiniu-objects-manager](https://img.shields.io/crates/v/qiniu-objects-manager.svg)](https://crates.io/crates/qiniu-objects-manager) | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-objects-manager) | å®ç°ä¸ƒç‰›å¯¹è±¡ç›¸å…³ç®¡ç†æ¥å£ï¼ŒåŒ…å«å¯¹è±¡çš„åˆ—ä¸¾å’Œæ“ä½œ                                                                                                                                                                                                                                     |
| [![qiniu-upload-manager](https://img.shields.io/crates/v/qiniu-upload-manager.svg)](https://crates.io/crates/qiniu-upload-manager)    | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-upload-manager)  | å®ç°ä¸ƒç‰›å¯¹è±¡ä¸Šä¼ åŠŸèƒ½                                                                                                                                                                                                                                                               |
| [![qiniu-sdk](https://img.shields.io/crates/v/qiniu-sdk.svg)](https://crates.io/crates/qiniu-sdk)                                     | [![docs.rs](https://img.shields.io/badge/docs-latest-blue.svg)](https://docs.rs/qiniu-sdk)             | ä¸ƒç‰› SDK å…¥å£                                                                                                                                                                                                                                                                      |

# é‰´æƒ

Rust SDK çš„æ‰€æœ‰çš„åŠŸèƒ½ï¼Œéƒ½éœ€è¦åˆæ³•çš„æˆæƒã€‚æˆæƒå‡­è¯çš„ç­¾ç®—éœ€è¦<span id="Productname">ä¸ƒç‰›</span>è´¦å·ä¸‹çš„ä¸€å¯¹æœ‰æ•ˆçš„`Access Key`å’Œ`Secret Key`ï¼Œè¿™å¯¹å¯†é’¥å¯ä»¥é€šè¿‡å¦‚ä¸‹æ­¥éª¤è·å¾—ï¼š

1. <span id="Null">ç‚¹å‡»[æ³¨å†ŒğŸ”—](https://portal.qiniu.com/signup)</span>å¼€é€š<span id="Productname">ä¸ƒç‰›</span>å¼€å‘è€…å¸å·
2. å¦‚æœå·²æœ‰è´¦å·ï¼Œç›´æ¥ç™»å½•<span id="Productname">ä¸ƒç‰›</span>å¼€å‘è€…åå°ï¼Œ<span id="Null">ç‚¹å‡»[è¿™é‡ŒğŸ”—](https://portal.qiniu.com/user/key)</span>æŸ¥çœ‹ Access Key å’Œ Secret Key

ä»¥ä¸‹æ‰€æœ‰ä»£ç ç¤ºä¾‹éƒ½ä»¥ `qiniu-sdk` ä½œä¸ºå…¥å£ã€‚

<a id="io-put"></a>
# æ–‡ä»¶ä¸Šä¼ 
- <a href="#upload-flow">ä¸Šä¼ æµç¨‹</a>
- <a href="#upload-token">å®¢æˆ·ç«¯ä¸Šä¼ å‡­è¯</a>
     - <a href="#simple-uptoken">ç®€å•ä¸Šä¼ å‡­è¯</a>
     - <a href="#overwrite-uptoken">è¦†ç›–ä¸Šä¼ å‡­è¯</a>
     - <a href="#returnbody-uptoken">è‡ªå®šä¹‰ä¸Šä¼ å›å¤å‡­è¯</a>
     - <a href="#callback-uptoken">å¸¦å›è°ƒä¸šåŠ¡æœåŠ¡å™¨çš„å‡­è¯</a>
     - <a href="#param-uptoken">å¸¦è‡ªå®šä¹‰å‚æ•°çš„å‡­è¯</a>
     - <a href="#general-uptoken">ç»¼åˆä¸Šä¼ å‡­è¯</a>
- <a href="#server-upload">æœåŠ¡å™¨ç›´ä¼ </a>
 	- <a href="#upload-file">æ–‡ä»¶ä¸Šä¼ </a>
 	- <a href="#upload-bytes">å­—èŠ‚æ•°ç»„ä¸Šä¼  / æ•°æ®æµä¸Šä¼ </a>
 	- <a href="#upload-selfdefineParam">è‡ªå®šä¹‰å‚æ•°ä¸Šä¼ </a>

### ä¸Šä¼ æµç¨‹

æ–‡ä»¶ä¸Šä¼ åˆ†ä¸ºå®¢æˆ·ç«¯ä¸Šä¼ ï¼ˆä¸»è¦æ˜¯æŒ‡ç½‘é¡µç«¯å’Œç§»åŠ¨ç«¯ç­‰é¢å‘ç»ˆç«¯ç”¨æˆ·çš„åœºæ™¯ï¼‰å’ŒæœåŠ¡ç«¯ä¸Šä¼ ä¸¤ç§åœºæ™¯ï¼Œå…·ä½“å¯ä»¥å‚è€ƒæ–‡æ¡£[ä¸šåŠ¡æµç¨‹](/kodo/manual/1205/programming-model)ã€‚

æœåŠ¡ç«¯ SDK åœ¨ä¸Šä¼ æ–¹é¢ä¸»è¦æä¾›ä¸¤ç§åŠŸèƒ½ï¼Œä¸€ç§æ˜¯ç”Ÿæˆå®¢æˆ·ç«¯ä¸Šä¼ æ‰€éœ€è¦çš„ä¸Šä¼ å‡­è¯ï¼Œå¦å¤–ä¸€ç§æ˜¯ç›´æ¥ä¸Šä¼ æ–‡ä»¶åˆ°äº‘ç«¯ã€‚

<a id="upload-token"></a>

### å®¢æˆ·ç«¯ä¸Šä¼ å‡­è¯ï¼ˆéœ€è¦ä¾èµ– `qiniu-sdk` å¯ç”¨ `upload-token` åŠŸèƒ½ï¼‰

å®¢æˆ·ç«¯ï¼ˆç§»åŠ¨ç«¯æˆ–è€… Web ç«¯ï¼‰ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™ï¼Œéœ€è¦ä»å®¢æˆ·è‡ªå·±çš„ä¸šåŠ¡æœåŠ¡å™¨è·å–ä¸Šä¼ å‡­è¯ï¼Œè€Œè¿™äº›ä¸Šä¼ å‡­è¯æ˜¯é€šè¿‡æœåŠ¡ç«¯çš„ SDK æ¥ç”Ÿæˆçš„ï¼Œç„¶åé€šè¿‡å®¢æˆ·è‡ªå·±çš„ä¸šåŠ¡ API åˆ†å‘ç»™å®¢æˆ·ç«¯ä½¿ç”¨ã€‚æ ¹æ®ä¸Šä¼ çš„ä¸šåŠ¡éœ€æ±‚ä¸åŒï¼ŒRust SDKæ”¯æŒä¸°å¯Œçš„ä¸Šä¼ å‡­è¯ç”Ÿæˆæ–¹å¼ã€‚

<a id="simple-uptoken"></a>

#### ç®€å•ä¸Šä¼ çš„å‡­è¯

æœ€ç®€å•çš„ä¸Šä¼ å‡­è¯åªéœ€è¦ `access key`ï¼Œ`secret key` å’Œ `bucket` å°±å¯ä»¥ï¼Œå¹¶æŒ‡å®šä¸Šä¼ å‡­è¯çš„æœ‰æ•ˆæœŸã€‚

```rust
use qiniu_sdk::upload_token::{UploadPolicy, credential::Credential, prelude::*};
use std::time::Duration;

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let credential = Credential::new(access_key, secret_key);
let upload_token = UploadPolicy::new_for_bucket(bucket_name, Duration::from_secs(3600))
    .build_token(credential, Default::default())?;
println!("{}", upload_token);
```

<a id="overwrite-uptoken"></a>

#### è¦†ç›–ä¸Šä¼ çš„å‡­è¯

è¦†ç›–ä¸Šä¼ é™¤äº†éœ€è¦ç®€å•ä¸Šä¼ æ‰€éœ€è¦çš„ä¿¡æ¯ä¹‹å¤–ï¼Œè¿˜éœ€è¦æƒ³è¿›è¡Œè¦†ç›–çš„å¯¹è±¡åç§° `object name`ï¼Œè¿™ä¸ªå¯¹è±¡åç§°åŒæ—¶æ˜¯å®¢æˆ·ç«¯ä¸Šä¼ ä»£ç ä¸­æŒ‡å®šçš„å¯¹è±¡åç§°ï¼Œä¸¤è€…å¿…é¡»ä¸€è‡´ã€‚

```rust
use qiniu_sdk::upload_token::{UploadPolicy, credential::Credential, prelude::*};
use std::time::Duration;

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let upload_token = UploadPolicy::new_for_object(bucket_name, object_name, Duration::from_secs(3600))
    .build_token(credential, Default::default())?;
println!("{}", upload_token);
```

<a id="returnbody-uptoken"></a>

#### è‡ªå®šä¹‰ä¸Šä¼ å›å¤çš„å‡­è¯

é»˜è®¤æƒ…å†µä¸‹ï¼Œæ–‡ä»¶ä¸Šä¼ åˆ°å­˜å‚¨ä¹‹åï¼Œåœ¨æ²¡æœ‰è®¾ç½® `return_body` æˆ–è€…`å›è°ƒ`ç›¸å…³çš„å‚æ•°æƒ…å†µä¸‹ï¼Œ<span id="Productname">ä¸ƒç‰›</span>è¿”å›ç»™ä¸Šä¼ ç«¯çš„å›å¤æ ¼å¼ä¸º `hash` å’Œ `key`ï¼Œä¾‹å¦‚ï¼š

```json
{"hash":"Ftgm-CkWePC9fzMBTRNmPMhGBcSV","key":"qiniu.jpg"}
```

æœ‰æ—¶å€™æˆ‘ä»¬å¸Œæœ›èƒ½è‡ªå®šä¹‰è¿™ä¸ªè¿”å›çš„ JSON æ ¼å¼çš„å†…å®¹ï¼Œå¯ä»¥é€šè¿‡è®¾ç½® `return_body` å‚æ•°æ¥å®ç°ï¼Œåœ¨ `return_body` ä¸­ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨<span id="Productname">ä¸ƒç‰›</span>æ”¯æŒçš„[é­”æ³•å˜é‡](/kodo/manual/1235/vars#magicvar)å’Œ[è‡ªå®šä¹‰å˜é‡](/kodo/manual/1235/vars#xvar)ã€‚

```rust
use qiniu_sdk::upload_token::{UploadPolicy, credential::Credential, prelude::*};
use std::time::Duration;

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let upload_token = UploadPolicy::new_for_object(bucket_name, object_name, Duration::from_secs(3600))
    .return_body("{\"key\":\"$(key)\",\"hash\":\"$(etag)\",\"bucket\":\"$(bucket)\",\"fsize\":$(fsize)}")
    .build_token(credential, Default::default())?;
println!("{}", upload_token);
```

åˆ™æ–‡ä»¶ä¸Šä¼ åˆ°<span id="Productname">ä¸ƒç‰›</span>ä¹‹åï¼Œæ”¶åˆ°çš„å›å¤å†…å®¹å¦‚ä¸‹ï¼š

```json
{"key":"qiniu.jpg","hash":"Ftgm-CkWePC9fzMBTRNmPMhGBcSV","bucket":"if-bc","fsize":39335}
```

<a id="callback-uptoken"></a>

#### å¸¦å›è°ƒä¸šåŠ¡æœåŠ¡å™¨çš„å‡­è¯

ä¸Šé¢ç”Ÿæˆçš„è‡ªå®šä¹‰ä¸Šä¼ å›å¤çš„ä¸Šä¼ å‡­è¯é€‚ç”¨äºä¸Šä¼ ç«¯ï¼ˆæ— è®ºæ˜¯å®¢æˆ·ç«¯è¿˜æ˜¯æœåŠ¡ç«¯ï¼‰å’Œ<span id="Productname">ä¸ƒç‰›</span>æœåŠ¡å™¨ä¹‹é—´è¿›è¡Œç›´æ¥äº¤äº’çš„æƒ…å†µä¸‹ã€‚åœ¨å®¢æˆ·ç«¯ä¸Šä¼ çš„åœºæ™¯ä¹‹ä¸‹ï¼Œæœ‰æ—¶å€™å®¢æˆ·ç«¯éœ€è¦åœ¨æ–‡ä»¶ä¸Šä¼ åˆ°<span id="Productname">ä¸ƒç‰›</span>ä¹‹åï¼Œä»ä¸šåŠ¡æœåŠ¡å™¨è·å–ç›¸å…³çš„ä¿¡æ¯ï¼Œè¿™ä¸ªæ—¶å€™å°±è¦ç”¨åˆ°<span id="Productname">ä¸ƒç‰›</span>çš„ä¸Šä¼ å›è°ƒåŠç›¸å…³å›è°ƒå‚æ•°çš„è®¾ç½®ã€‚

```rust
use qiniu_sdk::upload_token::{UploadPolicy, credential::Credential, prelude::*};
use std::time::Duration;

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let upload_token = UploadPolicy::new_for_object(bucket_name, object_name, Duration::from_secs(3600))
    .callback(&["http://api.example.com/qiniu/upload/callback"], "", "{\"key\":\"$(key)\",\"hash\":\"$(etag)\",\"bucket\":\"$(bucket)\",\"fsize\":$(fsize)}", "application/json")
    .build_token(credential, Default::default())?;
println!("{}", upload_token);
```

åœ¨ä½¿ç”¨äº†ä¸Šä¼ å›è°ƒçš„æƒ…å†µä¸‹ï¼Œå®¢æˆ·ç«¯æ”¶åˆ°çš„å›å¤å°±æ˜¯ä¸šåŠ¡æœåŠ¡å™¨å“åº”<span id="Productname">ä¸ƒç‰›</span>çš„ JSON æ ¼å¼å†…å®¹ã€‚
é€šå¸¸æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å»ºè®®ä½¿ç”¨ `application/json` æ ¼å¼æ¥è®¾ç½® `callback_body`ï¼Œä¿æŒæ•°æ®æ ¼å¼çš„ç»Ÿä¸€æ€§ã€‚å®é™…æƒ…å†µä¸‹ï¼Œ`callback_body` ä¹Ÿæ”¯æŒ `application/x-www-form-urlencoded` æ ¼å¼æ¥ç»„ç»‡å†…å®¹ï¼Œè¿™ä¸ªä¸»è¦çœ‹ä¸šåŠ¡æœåŠ¡å™¨åœ¨æ¥æ”¶åˆ° `callback_body` çš„å†…å®¹æ—¶å¦‚ä½•è§£æã€‚ä¾‹å¦‚ï¼š

```rust
use qiniu_sdk::upload_token::{UploadPolicy, credential::Credential, prelude::*};
use std::time::Duration;

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let upload_token = UploadPolicy::new_for_object(bucket_name, object_name, Duration::from_secs(3600))
    .callback(&["http://api.example.com/qiniu/upload/callback"], "", "key=$(key)&hash=$(etag)&bucket=$(bucket)&fsize=$(fsize)", "")
    .build_token(credential, Default::default())?;
println!("{}", upload_token);
```

<a id="param-uptoken"></a>
#### å¸¦è‡ªå®šä¹‰å‚æ•°çš„å‡­è¯

å­˜å‚¨æœåŠ¡æ”¯æŒå®¢æˆ·ç«¯ä¸Šä¼ æ–‡ä»¶çš„æ—¶å€™å®šä¹‰ä¸€äº›è‡ªå®šä¹‰å‚æ•°ï¼Œè¿™äº›å‚æ•°å¯ä»¥åœ¨ `returnBody` å’Œ `callbackBody` é‡Œé¢å’Œ<span id="Productname">ä¸ƒç‰›</span>å†…ç½®æ”¯æŒçš„é­”æ³•å˜é‡ï¼ˆå³ç³»ç»Ÿå˜é‡ï¼‰é€šè¿‡ç›¸åŒçš„æ–¹å¼æ¥å¼•ç”¨ã€‚è¿™äº›è‡ªå®šä¹‰çš„å‚æ•°åç§°å¿…é¡»ä»¥ `x:` å¼€å¤´ã€‚ä¾‹å¦‚å®¢æˆ·ç«¯ä¸Šä¼ çš„æ—¶å€™æŒ‡å®šäº†è‡ªå®šä¹‰çš„å‚æ•° `x:user` å’Œ `x:age` åˆ†åˆ«æ˜¯ `String` å’Œ `usize` ç±»å‹ã€‚é‚£ä¹ˆå¯ä»¥é€šè¿‡ä¸‹é¢çš„æ–¹å¼å¼•ç”¨ï¼š

```rust
upload_policy_builder.return_body("{\"key\":\"$(key)\",\"hash\":\"$(etag)\",\"bucket\":\"$(bucket)\",\"fsize\":$(fsize),\"user\":\"$(x:user)\",\"age\",$(x:age)}");
```

æˆ–è€…

```rust
upload_policy_builder.callback(&["http://api.example.com/qiniu/upload/callback"], "", "{\"key\":\"$(key)\",\"hash\":\"$(etag)\",\"bucket\":\"$(bucket)\",\"fsize\":$(fsize),\"user\":\"$(x:user)\",\"age\",$(x:age)}", "application/json")
```

<a id="general-uptoken"></a>
#### ç»¼åˆä¸Šä¼ å‡­è¯

ä¸Šé¢çš„ç”Ÿæˆä¸Šä¼ å‡­è¯çš„æ–¹æ³•ï¼Œéƒ½æ˜¯é€šè¿‡è®¾ç½®[ä¸Šä¼ ç­–ç•¥ğŸ”—](/kodo/manual/1206/put-policy)ç›¸å…³çš„å‚æ•°æ¥æ”¯æŒçš„ï¼Œè¿™äº›å‚æ•°å¯ä»¥é€šè¿‡ä¸åŒçš„ç»„åˆæ–¹å¼æ¥æ»¡è¶³ä¸åŒçš„ä¸šåŠ¡éœ€æ±‚ï¼Œå¯ä»¥çµæ´»åœ°ç»„ç»‡ä½ æ‰€éœ€è¦çš„ä¸Šä¼ å‡­è¯ã€‚

<a id="server-upload"></a>
### æœåŠ¡ç«¯ç›´ä¼ ï¼ˆéœ€è¦ä¾èµ– `qiniu-sdk` å¯ç”¨ `upload` åŠŸèƒ½ï¼‰

æœåŠ¡ç«¯ç›´ä¼ æ˜¯æŒ‡å®¢æˆ·åˆ©ç”¨<span id="Productname">ä¸ƒç‰›</span>æœåŠ¡ç«¯ SDK ä»æœåŠ¡ç«¯ç›´æ¥ä¸Šä¼ æ–‡ä»¶åˆ°<span id="Productname">ä¸ƒç‰›äº‘</span>ï¼Œäº¤äº’çš„åŒæ–¹ä¸€èˆ¬éƒ½åœ¨æœºæˆ¿é‡Œé¢ï¼Œæ‰€ä»¥æœåŠ¡ç«¯å¯ä»¥è‡ªå·±ç”Ÿæˆä¸Šä¼ å‡­è¯ï¼Œç„¶ååˆ©ç”¨ SDK ä¸­çš„ä¸Šä¼ é€»è¾‘è¿›è¡Œä¸Šä¼ ï¼Œæœ€åä»<span id="Productname">ä¸ƒç‰›äº‘</span>è·å–ä¸Šä¼ çš„ç»“æœï¼Œè¿™ä¸ªè¿‡ç¨‹ä¸­ç”±äºåŒæ–¹éƒ½æ˜¯ä¸šåŠ¡æœåŠ¡å™¨ï¼Œæ‰€ä»¥å¾ˆå°‘åˆ©ç”¨åˆ°ä¸Šä¼ å›è°ƒçš„åŠŸèƒ½ï¼Œè€Œæ˜¯ç›´æ¥è‡ªå®šä¹‰ `return_body` æ¥è·å–è‡ªå®šä¹‰çš„å›å¤å†…å®¹ã€‚

<a id="upload-file"></a>
#### æ–‡ä»¶ä¸Šä¼ 
æœ€ç®€å•çš„å°±æ˜¯ä¸Šä¼ æœ¬åœ°æ–‡ä»¶ï¼Œç›´æ¥æŒ‡å®šæ–‡ä»¶çš„å®Œæ•´è·¯å¾„å³å¯ä¸Šä¼ ã€‚

```rust
use qiniu_sdk::upload::{
    apis::credential::Credential, AutoUploader, AutoUploaderObjectParams, UploadManager,
    UploadTokenSigner,
};
use std::{time::Duration};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let upload_manager = UploadManager::builder(UploadTokenSigner::new_credential_provider(
    credential,
    bucket_name,
    Duration::from_secs(3600),
))
.build();
let uploader: AutoUploader = upload_manager.auto_uploader();

let params = AutoUploaderObjectParams::builder().object_name(object_name).file_name(object_name).build();
uploader.upload_path("/home/qiniu/test.png", params)?;
```

åœ¨è¿™ä¸ªåœºæ™¯ä¸‹ï¼Œ`AutoUploader` ä¼šè‡ªåŠ¨æ ¹æ®æ–‡ä»¶å°ºå¯¸åˆ¤å®šæ˜¯å¦å¯ç”¨æ–­ç‚¹ç»­ä¸Šä¼ ï¼Œå¦‚æœæ–‡ä»¶è¾ƒå¤§ï¼Œä¸Šä¼ äº†ä¸€éƒ¨åˆ†æ—¶å› å„ç§åŸå› ä»è€Œä¸­æ–­ï¼Œå†é‡æ–°æ‰§è¡Œç›¸åŒçš„ä»£ç æ—¶ï¼ŒSDK ä¼šå°è¯•æ‰¾åˆ°å…ˆå‰æ²¡æœ‰å®Œæˆçš„ä¸Šä¼ ä»»åŠ¡ï¼Œä»è€Œç»§ç»­è¿›è¡Œä¸Šä¼ ã€‚

<a id="upload-bytes"></a>

#### å­—èŠ‚æ•°ç»„ä¸Šä¼  / æ•°æ®æµä¸Šä¼ 

å¯ä»¥æ”¯æŒå°†å†…å­˜ä¸­çš„å­—èŠ‚æ•°ç»„æˆ–å®ç°äº† `std::io::Read` çš„å®ä¾‹ä¸Šä¼ åˆ°ç©ºé—´ä¸­ã€‚

```rust
use qiniu_sdk::upload::{
    apis::credential::Credential, AutoUploader, AutoUploaderObjectParams, UploadManager,
    UploadTokenSigner,
};
use std::{io::Cursor, time::Duration};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let upload_manager = UploadManager::builder(UploadTokenSigner::new_credential_provider(
    credential,
    bucket_name,
    Duration::from_secs(3600),
))
.build();
let uploader: AutoUploader = upload_manager.auto_uploader();

let params = AutoUploaderObjectParams::builder().object_name(object_name).file_name(object_name).build();
uploader.upload_reader(Cursor::new("hello qiniu cloud"), params)?;
```

<a id="upload-selfdefineParam"></a>
#### è‡ªå®šä¹‰å‚æ•°ä¸Šä¼ 

```rust
use qiniu_sdk::upload::{
    apis::credential::Credential, AutoUploader, AutoUploaderObjectParams, UploadManager, UploadTokenSigner,
};
use std::{io::Cursor, time::Duration};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let upload_manager = UploadManager::builder(
    UploadTokenSigner::new_credential_provider_builder(credential, bucket_name, Duration::from_secs(3600))
        .on_policy_generated(|builder| {
            builder
                .return_body("{\"key\":\"$(key)\",\"hash\":\"$(etag)\",\"fname\":\"$(x:fname)\",\"age\",$(x:age)}");
        })
        .build(),
)
.build();
let uploader: AutoUploader = upload_manager.auto_uploader();

let params = AutoUploaderObjectParams::builder()
    .object_name(object_name)
    .file_name(object_name)
    .insert_custom_var("fname", "123.jpg")
    .insert_custom_var("age", "20")
    .build();
uploader.upload_path("/home/qiniu/test.mp4", params)?;
```

<a id="io-get"></a>
# ä¸‹è½½æ–‡ä»¶

 - <a href="#public-get">å…¬å¼€ç©ºé—´</a>
 - <a href="#private-get">ç§æœ‰ç©ºé—´</a>

æ–‡ä»¶ä¸‹è½½åˆ†ä¸ºå…¬å¼€ç©ºé—´çš„æ–‡ä»¶ä¸‹è½½å’Œç§æœ‰ç©ºé—´çš„æ–‡ä»¶ä¸‹è½½ã€‚

<a id="public-get"></a>
### å…¬å¼€ç©ºé—´

å¯¹äºå…¬å¼€ç©ºé—´ï¼Œå…¶è®¿é—®çš„é“¾æ¥ä¸»è¦æ˜¯å°†ç©ºé—´ç»‘å®šçš„åŸŸåæ‹¼æ¥ä¸Šç©ºé—´é‡Œé¢çš„æ–‡ä»¶åå³å¯è®¿é—®ï¼Œæ ‡å‡†æƒ…å†µä¸‹éœ€è¦åœ¨æ‹¼æ¥é“¾æ¥ä¹‹å‰ï¼Œå°†æ–‡ä»¶åè¿›è¡Œ `urlencode` ä»¥å…¼å®¹ä¸åŒçš„å­—ç¬¦ã€‚å¦‚æœæœ‰å…¶ä»–è®¿é—®å¤„ç†éœ€æ±‚ï¼Œåœ¨æ–‡ä»¶åä¹‹åç»§ç»­æ‹¼æ¥å³å¯ã€‚è¿™ä¸ªè¿‡ç¨‹å®é™…ä¸Šä¸éœ€è¦ä½¿ç”¨<span id="Productname">ä¸ƒç‰›</span> SDK ä¹Ÿå¯ä»¥å®Œæˆã€‚

```rust
use http::Uri;

let object_name = "å…¬å¸/å­˜å‚¨/qiniu.jpg";
let domain = "devtools.qiniu.com";
let mut path = "/".to_string();
url_escape::encode_path_to_string(object_name, &mut path);
let url = Uri::builder()
    .scheme("http")
    .authority(domain)
    .path_and_query(path)
    .build()?;
println!("{}", url);
```

<a id="private-get"></a>
### ç§æœ‰ç©ºé—´ï¼ˆéœ€è¦ä¾èµ– `qiniu-sdk` å¯ç”¨ `credential` åŠŸèƒ½ï¼‰

å¯¹äºç§æœ‰ç©ºé—´ï¼Œé¦–å…ˆéœ€è¦æŒ‰ç…§å…¬å¼€ç©ºé—´çš„æ–‡ä»¶è®¿é—®æ–¹å¼æ„å»ºå¯¹åº”çš„å…¬å¼€ç©ºé—´è®¿é—®é“¾æ¥ï¼Œç„¶åå†å¯¹è¿™ä¸ªé“¾æ¥è¿›è¡Œç§æœ‰æˆæƒç­¾åã€‚

```rust
use qiniu_sdk::credential::Credential;
use http::Uri;

let access_key = "access key";
let secret_key = "secret key";
let object_name = "å…¬å¸/å­˜å‚¨/qiniu.jpg";
let domain = "devtools.qiniu.com";
let mut path = "/".to_string();
url_escape::encode_path_to_string(object_name, &mut path);
let url = Uri::builder()
    .scheme("http")
    .authority(domain)
    .path_and_query(path)
    .build()?;
let credential = Credential::new(access_key, secret_key);
let url = credential.sign_download_url(url, Duration::from_secs(3600));
println!("{}", url);
```

<a id="rs"></a>
# èµ„æºç®¡ç†ï¼ˆéœ€è¦ä¾èµ– `qiniu-sdk` å¯ç”¨ `objects` åŠŸèƒ½ï¼‰

èµ„æºç®¡ç†åŒ…æ‹¬çš„ä¸»è¦åŠŸèƒ½æœ‰ï¼š

- <a href="#rs-stat">è·å–æ–‡ä»¶ä¿¡æ¯</a>
- <a href="#rs-chgm">ä¿®æ”¹æ–‡ä»¶ç±»å‹</a>
- <a href="#rs-move">ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶</a>
- <a href="#rs-copy">å¤åˆ¶æ–‡ä»¶å‰¯æœ¬</a>
- <a href="#rs-delete">åˆ é™¤ç©ºé—´ä¸­çš„æ–‡ä»¶</a>
- <a href="#rs-delete-after-days">è®¾ç½®æˆ–æ›´æ–°æ–‡ä»¶ç”Ÿå­˜æ—¶é—´</a>
- <a href="#rs-list">è·å–ç©ºé—´æ–‡ä»¶åˆ—è¡¨</a>
- <a href="#rs-batch">èµ„æºç®¡ç†æ‰¹é‡æ“ä½œ</a>
    - <a href="#rs-batch-stat">æ‰¹é‡è·å–æ–‡ä»¶ä¿¡æ¯<a/>
    - <a href="#rs-batch-chgm">æ‰¹é‡ä¿®æ”¹æ–‡ä»¶ç±»å‹<a/>
    - <a href="#rs-batch-delete">æ‰¹é‡åˆ é™¤æ–‡ä»¶<a/>
    - <a href="#rs-batch-move">æ‰¹é‡ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶<a/>
    - <a href="#rs-batch-copy">æ‰¹é‡å¤åˆ¶æ–‡ä»¶<a/>
    - <a href="#rs-batch-restoreAr">æ‰¹é‡è§£å†»å½’æ¡£å­˜å‚¨ç±»å‹æ–‡ä»¶<a/>

<a id="rs-stat"></a>
#### è·å–æ–‡ä»¶ä¿¡æ¯

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);

let response = bucket.stat_object(object_name).call()?;
let entry = response.into_body();
println!("{}", entry.get_hash_as_str());
println!("{}", entry.get_size_as_u64());
println!("{}", entry.get_mime_type_as_str());
println!("{}", entry.get_put_time_as_u64());
```

<a id="rs-chgm"></a>
#### ä¿®æ”¹æ–‡ä»¶ç±»å‹

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);

bucket
    .modify_object_metadata(object_name, mime::APPLICATION_JSON)
    .call()?;
```

<a id="rs-move"></a>
#### ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶

ç§»åŠ¨æ“ä½œæœ¬èº«æ”¯æŒç§»åŠ¨æ–‡ä»¶åˆ°ç›¸åŒï¼Œä¸åŒç©ºé—´ä¸­ï¼Œåœ¨ç§»åŠ¨çš„åŒæ—¶ä¹Ÿå¯ä»¥æ”¯æŒæ–‡ä»¶é‡å‘½åã€‚å”¯ä¸€çš„é™åˆ¶æ¡ä»¶æ˜¯ï¼Œç§»åŠ¨çš„æºç©ºé—´å’Œç›®æ ‡ç©ºé—´å¿…é¡»åœ¨åŒä¸€ä¸ªæœºæˆ¿ã€‚

`move_object_to` æ“ä½œæ”¯æŒå¼ºåˆ¶è¦†ç›–é€‰é¡¹ï¼Œå³å¦‚æœç›®æ ‡æ–‡ä»¶å·²å­˜åœ¨ï¼Œå¯ä»¥è®¾ç½®å¼ºåˆ¶è¦†ç›–å‚æ•° `is_force(true)` æ¥è¦†ç›–é‚£ä¸ªæ–‡ä»¶çš„å†…å®¹ã€‚

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let to_bucket_name = "to bucket name";
let to_object_name = "new object name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);

bucket
    .move_object_to(object_name, to_bucket_name, to_object_name);
    .call()?;
```

<a id="rs-copy"></a>
#### å¤åˆ¶æ–‡ä»¶å‰¯æœ¬

æ–‡ä»¶çš„å¤åˆ¶å’Œæ–‡ä»¶ç§»åŠ¨å…¶å®æ“ä½œä¸€æ ·ï¼Œä¸»è¦çš„åŒºåˆ«æ˜¯ç§»åŠ¨åæºæ–‡ä»¶ä¸å­˜åœ¨äº†ï¼Œè€Œå¤åˆ¶çš„ç»“æœæ˜¯æºæ–‡ä»¶è¿˜å­˜åœ¨ï¼Œåªæ˜¯å¤šäº†ä¸€ä¸ªæ–°çš„æ–‡ä»¶å‰¯æœ¬ã€‚

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let to_bucket_name = "to bucket name";
let to_object_name = "new object name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);

bucket
    .copy_object_to(object_name, to_bucket_name, to_object_name);
    .call()?;
```

<a id="rs-delete"></a>
#### åˆ é™¤ç©ºé—´ä¸­çš„æ–‡ä»¶

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);

bucket
    .delete_object(object_name);
    .call()?;
```

<a id="rs-delete-after-days"></a>
#### è®¾ç½®æˆ–æ›´æ–°æ–‡ä»¶çš„ç”Ÿå­˜æ—¶é—´

å¯ä»¥ç»™å·²ç»å­˜åœ¨äºç©ºé—´ä¸­çš„æ–‡ä»¶è®¾ç½®æ–‡ä»¶ç”Ÿå­˜æ—¶é—´ï¼Œæˆ–è€…æ›´æ–°å·²è®¾ç½®äº†ç”Ÿå­˜æ—¶é—´ä½†å°šæœªè¢«åˆ é™¤çš„æ–‡ä»¶çš„æ–°çš„ç”Ÿå­˜æ—¶é—´ã€‚

```rust
use qiniu_sdk::objects::{apis::credential::Credential, AfterDays, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let object_name = "object name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);

bucket
    .modify_object_life_cycle(object_name)
    .delete_after_days(AfterDays::new(10)) // è¿‡æœŸå¤©æ•°ï¼Œè¯¥æ–‡ä»¶å°†äº 10 å¤©ååˆ é™¤
    .call()?;
```

<a id="rs-list"></a>
#### è·å–ç©ºé—´æ–‡ä»¶åˆ—è¡¨

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);

let mut iter = bucket.list().iter();
while let Some(entry) = iter.next() {
    let entry = entry?;
    println!(
        "{}\n  hash: {}\n  size: {}\n  mime type: {}",
        entry.get_key_as_str(),
        entry.get_hash_as_str(),
        entry.get_size_as_u64(),
        entry.get_mime_type_as_str(),
    );
}
```

<a id="rs-batch"></a>
## èµ„æºç®¡ç†æ‰¹é‡æ“ä½œ

<a id="rs-batch-stat"></a>
#### æ‰¹é‡è·å–æ–‡ä»¶ä¿¡æ¯

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);
let mut ops = bucket.batch_ops();
ops.add_operation(bucket.stat_object("qiniu.jpg"));
ops.add_operation(bucket.stat_object("qiniu.mp4"));
ops.add_operation(bucket.stat_object("qiniu.png"));

let mut iter = ops.call();
while let Some(result) = iter.next() {
    match result {
        Ok(entry) => {
            println!(
                "hash: {:?}\n  size: {:?}\n  mime type: {:?}",
                entry.get_hash_as_str(),
                entry.get_size_as_u64(),
                entry.get_mime_type_as_str(),
            );
        }
        Err(err) => {
            println!("{:?}", err);
        }
    }
}
```

<a id="rs-batch-chgm"></a>
#### æ‰¹é‡ä¿®æ”¹æ–‡ä»¶ç±»å‹

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);
let mut ops = bucket.batch_ops();
ops.add_operation(bucket.modify_object_metadata("qiniu.jpg", mime::IMAGE_JPEG));
ops.add_operation(bucket.modify_object_metadata("qiniu.png", mime::IMAGE_PNG));
ops.add_operation(bucket.modify_object_metadata("qiniu.mp4", "video/mp4".parse()?));

let mut iter = ops.call();
while let Some(result) = iter.next() {
    match result {
        Ok(_) => {
            println!("Ok");
        }
        Err(err) => {
            println!("{:?}", err);
        }
    }
}
```

<a id="rs-batch-delete"></a>
#### æ‰¹é‡åˆ é™¤æ–‡ä»¶

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);
let mut ops = bucket.batch_ops();
ops.add_operation(bucket.delete_object("qiniu.jpg"));
ops.add_operation(bucket.delete_object("qiniu.png"));
ops.add_operation(bucket.delete_object("qiniu.mp4"));

let mut iter = ops.call();
while let Some(result) = iter.next() {
    match result {
        Ok(_) => {
            println!("Ok");
        }
        Err(err) => {
            println!("{:?}", err);
        }
    }
}
```

<a id="rs-batch-move"></a>
#### æ‰¹é‡ç§»åŠ¨æˆ–é‡å‘½åæ–‡ä»¶

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);
let mut ops = bucket.batch_ops();
ops.add_operation(bucket.move_object_to("qiniu.jpg", bucket_name, "qiniu.jpg.move"));
ops.add_operation(bucket.move_object_to("qiniu.png", bucket_name, "qiniu.png.move"));
ops.add_operation(bucket.move_object_to("qiniu.mp4", bucket_name, "qiniu.mp4.move"));

let mut iter = ops.call();
while let Some(result) = iter.next() {
    match result {
        Ok(_) => {
            println!("Ok");
        }
        Err(err) => {
            println!("{:?}", err);
        }
    }
}
```

<a id="rs-batch-copy"></a>
#### æ‰¹é‡å¤åˆ¶æ–‡ä»¶

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);
let mut ops = bucket.batch_ops();
ops.add_operation(bucket.copy_object_to("qiniu.jpg", bucket_name, "qiniu.jpg.move"));
ops.add_operation(bucket.copy_object_to("qiniu.png", bucket_name, "qiniu.png.move"));
ops.add_operation(bucket.copy_object_to("qiniu.mp4", bucket_name, "qiniu.mp4.move"));

let mut iter = ops.call();
while let Some(result) = iter.next() {
    match result {
        Ok(_) => {
            println!("Ok");
        }
        Err(err) => {
            println!("{:?}", err);
        }
    }
}
```

<a id="rs-batch-restoreAr"></a>
#### æ‰¹é‡è§£å†»å½’æ¡£å­˜å‚¨ç±»å‹æ–‡ä»¶

```rust
use qiniu_sdk::objects::{apis::credential::Credential, ObjectsManager};

let access_key = "access key";
let secret_key = "secret key";
let bucket_name = "bucket name";
let credential = Credential::new(access_key, secret_key);
let object_manager = ObjectsManager::builder(credential).build();
let bucket = object_manager.bucket(bucket_name);
let mut ops = bucket.batch_ops();
ops.add_operation(bucket.restore_archived_object("qiniu.jpg", 7));
ops.add_operation(bucket.restore_archived_object("qiniu.png", 7));
ops.add_operation(bucket.restore_archived_object("qiniu.mp4", 7));

let mut iter = ops.call();
while let Some(result) = iter.next() {
    match result {
        Ok(_) => {
            println!("Ok");
        }
        Err(err) => {
            println!("{:?}", err);
        }
    }
}
```

<a id="api-references"></a>
# API å‚è€ƒ

- [å­˜å‚¨ API å‚è€ƒ](/kodo/api/3939/overview-of-the-api)

<a id="faq"></a>
# æœ€ä½æ”¯æŒçš„ Rust ç‰ˆæœ¬ï¼ˆMSRVï¼‰

- 1.60.0 Stable

<a id="related-resources"></a>
# ç›¸å…³èµ„æº

å¦‚æœæ‚¨æœ‰ä»»ä½•å…³äºæˆ‘ä»¬æ–‡æ¡£æˆ–äº§å“çš„å»ºè®®å’Œæƒ³æ³•ï¼Œæ¬¢è¿æ‚¨é€šè¿‡ä»¥ä¸‹æ–¹å¼ä¸æˆ‘ä»¬äº’åŠ¨è®¨è®ºï¼š

* [æŠ€æœ¯è®ºå›](http://segmentfault.com/qiniu) - åœ¨è¿™é‡Œæ‚¨å¯ä»¥å’Œå…¶ä»–å¼€å‘è€…æ„‰å¿«çš„è®¨è®ºå¦‚ä½•æ›´å¥½çš„ä½¿ç”¨ä¸ƒç‰›äº‘æœåŠ¡
* [æäº¤å·¥å•](https://support.qiniu.com/tickets/new) - å¦‚æœæ‚¨çš„é—®é¢˜ä¸é€‚åˆåœ¨è®ºå›è®¨è®ºæˆ–å¸Œæœ›åŠæ—¶è§£å†³ï¼Œæ‚¨ä¹Ÿå¯ä»¥æäº¤ä¸€ä¸ªå·¥å•ï¼Œæˆ‘ä»¬çš„æŠ€æœ¯æ”¯æŒäººå‘˜ä¼šç¬¬ä¸€æ—¶é—´å›å¤æ‚¨
* [åšå®¢](http://blog.qiniu.com) - è¿™é‡Œä¼šæŒç»­æ›´æ–°å‘å¸ƒå¸‚åœºæ´»åŠ¨å’ŒæŠ€æœ¯åˆ†äº«æ–‡ç« 
* [å¾®åš](http://weibo.com/qiniutek)
* [å¸¸è§é—®é¢˜](https://support.qiniu.com/question)
	
<span id="del_in_kodoe_docs_block_end"></span>

<a id="contribute-code"></a>
# è´¡çŒ®ä»£ç 

1. Fork

2. åˆ›å»ºæ‚¨çš„ç‰¹æ€§åˆ†æ”¯ git checkout -b my-new-feature

3. æäº¤æ‚¨çš„æ”¹åŠ¨ git commit -am 'Added some feature'

4. å°†æ‚¨çš„ä¿®æ”¹è®°å½•æäº¤åˆ°è¿œç¨‹ git ä»“åº“ git push origin my-new-feature

5. ç„¶ååˆ° github ç½‘ç«™çš„è¯¥ git è¿œç¨‹ä»“åº“çš„ my-new-feature åˆ†æ”¯ä¸‹å‘èµ· Pull Request

<a id="license"></a>
# è®¸å¯è¯

Copyright (c) 2022 qiniu.com

åŸºäº MIT åè®®å‘å¸ƒ:

* [www.opensource.org/licenses/MIT](http://www.opensource.org/licenses/MIT)

<script>
  $().ready(function(){
    $(".topic-detail a a img").each(function(i, img){
      $(img).parent('a').parent('a').html($(img))
    })
  })
</script>