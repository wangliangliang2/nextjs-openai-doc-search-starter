[NuGet release](https://www.nuget.org/packages/Qiniu/7.3.0)

æ­¤ C# SDK é€‚ç”¨äº.NET Framework 2.0+, åŸºäºä¸ƒç‰›äº‘APIå‚è€ƒæ‰‹å†Œæ„å»ºã€‚

<a id="usage-examples"></a>
## SDKç»“æ„
å¯ä»¥ç›´æ¥æŸ¥çœ‹æˆ‘ä»¬çš„[SDKç›®å½•](https://github.com/qiniu/csharp-sdk/tree/master/src/Qiniu)ï¼Œå³å¯å¤§è‡´äº†è§£æˆ‘ä»¬ SDK çš„ç»“æ„ã€‚

* æœ€å¤–å±‚åŒ…å«ï¼šé…ç½®æ–‡ä»¶ï¼Œ é‰´æƒå’Œä¸€äº›å…¬å…±çš„å‡½æ•°ã€‚ 
* HTTP ç›®å½•ä¸»è¦åŒ…å«äº†ä¸€äº›å¯¹ http è¿›è¡Œå°è£…çš„ç±»ã€‚
* Storage ç›®å½•å¯¹åº”ä¸ƒç‰›äº‘å­˜å‚¨äº§å“(kodo)çš„ç›¸å…³API
* Cdn ç›®å½•ä¸»è¦åŒ…å«äº†ä¸ƒç‰›CDNäº§å“çš„ç›¸å…³API
* Qvsç›®å‰æ²¡æœ‰é›†æˆè¿›æ¥ï¼Œ`å®¢æˆ·å¯åœ¨è¯¥ç›®å½•ä¸‹ï¼Œæ–°å»ºQvs`,æ”¾ç½®Qvsäº§å“çš„ç›¸å…³APIã€‚[å¯¹åº”çš„APIæ–‡æ¡£](https://developer.qiniu.com/qvs/6706/summary-of-the-api)

<a id="opensource"></a>
# å¼€æº

- [c# SDK é¡¹ç›®åœ°å€](https://github.com/qiniu/csharp-sdk)
- [c# SDK å‘å¸ƒåœ°å€](https://github.com/qiniu/csharp-sdk/releases)
- [c# SDK å†å²æ–‡æ¡£](https://developer.qiniu.io/kodo/sdk/1237/csharp)

# å®‰è£…

- <a href="#qiniu-sdk-dll">ç›´æ¥æ·»åŠ DLLå¼•ç”¨</a>
- <a href="#qiniu-sdk-nuget">åŒ…ç®¡ç†å™¨(NuGet)æ–¹å¼å®‰è£…</a>
- <a href="#qiniu-sdk-src">ä»æºç ç¼–è¯‘</a>

<a id="qiniu-sdk-dll"></a>
**ç›´æ¥æ·»åŠ DLLå¼•ç”¨**

æ‚¨å¯ä»¥åœ¨[è¿™é‡Œ](https://github.com/qiniu/csharp-sdk/releases)æ‰¾åˆ°æ‰€æœ‰çš„Releaseï¼Œé€‰æ‹©æ‚¨éœ€è¦çš„ç‰ˆæœ¬ä¸‹è½½ï¼Œè§£å‹åå°†*.dllæ–‡ä»¶æ·»åŠ è‡³é¡¹ç›®å¼•ç”¨ã€‚éœ€è¦æ³¨æ„çš„æ˜¯ï¼Œæ­¤SDKä¾èµ–[Json.NET](http://www.newtonsoft.com/json)ï¼Œå¯ä»¥æ·»åŠ å¯¹åº”ç‰ˆæœ¬Newtonsoft.Json.dllå¼•ç”¨æˆ–è€…ä½¿ç”¨NuGetæ¥å®‰è£…å®ƒï¼š

```
Install-Package Newtonsoft.Json
```

<a id="qiniu-sdk-nuget"></a>

**åŒ…ç®¡ç†å™¨(NuGet)æ–¹å¼å®‰è£…**

æˆ–è€…ä»NuGetæ¥å®‰è£…ï¼Œä»¥Visual Studio 2013/2015ä¸ºä¾‹(å¦‚æœæ‚¨çš„Visual Studioæ²¡æœ‰å®‰è£…NuGetï¼Œè¯·å…ˆ[å®‰è£…](http://docs.nuget.org/docs/start-here/installing-nuget))ã€‚æ‰“å¼€NuGetç¨‹åºåŒ…ç®¡ç†å™¨æœç´¢Qiniu.Sharedæˆ–è€…åœ¨æ§åˆ¶å°ä¸­é”®å…¥ä»¥ä¸‹å‘½ä»¤ï¼š

```
Install-Package Qiniu
```

<a id="qiniu-sdk-src"></a>
**ä»æºç ç¼–è¯‘**

å½“ç„¶ï¼Œæ‚¨ä¹Ÿå¯ä»¥ç›´æ¥ä»æºç ç¼–è¯‘

```
git clone https://github.com/qiniu/csharp-sdk
```

# é‰´æƒ

ä¸ƒç‰› c# SDK çš„æ‰€æœ‰çš„åŠŸèƒ½ï¼Œéƒ½éœ€è¦åˆæ³•çš„æˆæƒã€‚æˆæƒå‡­è¯çš„ç­¾ç®—éœ€è¦ä¸ƒç‰›è´¦å·ä¸‹çš„ä¸€å¯¹æœ‰æ•ˆçš„`Access Key`å’Œ`Secret Key`ï¼Œè¿™å¯¹å¯†é’¥å¯ä»¥é€šè¿‡å¦‚ä¸‹æ­¥éª¤è·å¾—ï¼š

1. ç‚¹å‡»[æ³¨å†ŒğŸ”—](https://portal.qiniu.com/signup)å¼€é€šä¸ƒç‰›å¼€å‘è€…å¸å·
2. å¦‚æœå·²æœ‰è´¦å·ï¼Œç›´æ¥ç™»å½•ä¸ƒç‰›å¼€å‘è€…åå°ï¼Œç‚¹å‡»[è¿™é‡ŒğŸ”—](https://portal.qiniu.com/user/key)æŸ¥çœ‹ Access Key å’Œ Secret Key

# ç¤ºä¾‹
```c#
using System;
using Qiniu.Util;
using Qiniu.Http;
using System.Text;
using System.Security.Cryptography;




namespace QvsDemo.Business.Admin
{
    public class QvsBiz

    {
        public static void Main()
        {

            string ak = "xxxxxxxx";   // æ›¿æ¢æˆå®é™…çš„ak
            string sk = "xxxxxxxxx"; // æ›¿æ¢æˆå®é™…çš„sk
            Mac mac = new Mac(ak, sk);
            string body = "{\"data\":{ \"name\":\"test\"},\"params\":{ \"groups\":[\"ylxue_face_group_id2020\"]}}"; // æ ¹æ®å®é™…çš„API, æ›¿æ¢æˆå®é™…çš„http body
            HttpManager http = new HttpManager();    
            string url = "http://qvs.qiniuapi.com/v1/namespaces/xxxxxxx/streams";  // æ›¿æ¢æˆå®é™…çš„url,æ­¤å¤„ä»¥[APIåˆ›å»ºæµ](https://developer.qiniu.com/qvs/6734/create-flow)ä¸ºä¾‹
            Uri uri = new Uri(url);
            string contentType = "application/json"; 
            // å¦‚æœhttp bodyä¸ºç©ºæ—¶(ä¾‹å¦‚Getè¯·æ±‚), contentTypeè®¾ä¸ºapplication/x-www-form-urlencodedæˆ–è€…ä¸ºç©º
           //  å¦‚æœhttp bodyä¸ºç©ºæ—¶(ä¾‹å¦‚Getè¯·æ±‚), contentTypeè®¾ä¸ºapplication/x-www-form-urlencodedæˆ–è€…ä¸ºç©º
           //  å¦‚æœhttp bodyä¸ºç©ºæ—¶(ä¾‹å¦‚Getè¯·æ±‚), contentTypeè®¾ä¸ºapplication/x-www-form-urlencodedæˆ–è€…ä¸ºç©º
 
            string token = qiniutoken(mac, uri, body, contentType, "POST"); // æœ€åä¸€ä¸ªå‚æ•°ï¼Œæ ¹æ®å®é™…è¯·æ±‚æ›¿æ¢
            HttpResult ret = http.PostJson(url, body, token);
            Console.WriteLine(ret.Text);

        }
        public static string qiniutoken(Mac mac, Uri url, String body, String contentType, String method)
        {

            // input path and host and rawquery
            string path = url.AbsolutePath;
            string host = url.Host;
            string rawquery = url.Query;
            var data = new System.Text.StringBuilder();
            data.AppendFormat("{0} {1}", method, path);
            if (rawquery != String.Empty)
                data.AppendFormat("{0}", rawquery);
            data.AppendFormat("\nHost: {0}", host);
            if (contentType != String.Empty)
                data.AppendFormat("\nContent-Type: {0}", contentType);
            data.Append("\n\n");

            if (contentType != String.Empty && contentType != "application/octet-stream")
                data.Append(body);
            String sdata = data.ToString();
            Console.WriteLine(sdata);
            HMACSHA1 hmac = new HMACSHA1(Encoding.UTF8.GetBytes(mac.SecretKey));
            byte[] digest = hmac.ComputeHash(Encoding.UTF8.GetBytes(sdata));
            string qiniuToken = String.Format("Qiniu {0}:{1}", mac.AccessKey, Base64.UrlSafeBase64Encode(digest));
            //string qiniuToken = String.Format("Qiniu {0}:{1}", mac.AccessKey, System.Convert.ToBase64String(digest).Replace("/", "+").Replace("+", "-"));
            Console.WriteLine(qiniuToken);
            return qiniuToken;
        }

    }
}
```