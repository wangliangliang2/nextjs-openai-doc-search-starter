<link rel="stylesheet" type="text/css" href="https://docs.qnsdk.com/styles/doc-v4-api.css" />
<div class="rtc-doc rtc-doc-page" id="rtc-doc">
<section class="rtc-doc-panel rtc-doc-describe rtc-doc-note">
                跨房媒体转发回调接口，可通过调用 <a href='9446/QNRTCClient#StartMediaRelay'>QNRTCClient.StartMediaRelay</a> 等方法传入</section>
            <div class="rtc-doc-page-wrap">Index</div>
<section class="rtc-doc-panel">
        <div class="rtc-doc-page-title">Core Methods</div>
        <ul class="rtc-doc-catalogue">
                <li><a onClick='document.location.replace(`${document.location.protocol}//${document.location.host}${document.location.pathname}${document.location.search}#OnMediaRelayResult`)'>OnMediaRelayResult</a></li>
                <li><a onClick='document.location.replace(`${document.location.protocol}//${document.location.host}${document.location.pathname}${document.location.search}#OnMediaRelayError`)'>OnMediaRelayError</a></li>
        </ul>
</section>
<div class="rtc-doc-page-wrap">Core Methods</div>
<section class="rtc-doc-panel">
<div class="rtc-doc-page-title rtc-doc-antor" id="OnMediaRelayResult">OnMediaRelayResult</div>
<ul class="rtc-doc-page-container">
        <li class="rtc-doc-sign-signature">virtual void OnMediaRelayResult(std::map&lt;std::string, QNMediaRelayState&gt; state_map) = 0</li>
    </li>
<li class="rtc-doc-page-description">
    <div class="rtc-doc-desc-wrap">
        <p>跨房媒体转发操作成功</p>
    </div>
<section class="rtc-doc-panel rtc-doc-describe-note">
    <blockquote class="blockquote-warning">
    <p>注意：此接口回调的是全量的跨房状态，包含所有跨房目标。具体每个目标房间是否转发成功，需要参考回调参数中目标房间对应的 <a href='11336/QNMediaRelayState'>QNMediaRelayState</a></p>
    </blockquote>
</section>
<div class="rtc-doc-parameters-title">Parameters</div>
<ul class="rtc-doc-parameters">
    <li>
        <div>
            state_map: Map&lt;String, <a href='11336/QNMediaRelayState'>QNMediaRelayState</a>&gt;
        </div>
                <p>具体目标房间状态， key 为房间名， value 为状态</p>
    </li>
</ul>
</li>
</ul>
</section>
<section class="rtc-doc-panel">
<div class="rtc-doc-page-title rtc-doc-antor" id="OnMediaRelayError">OnMediaRelayError</div>
<ul class="rtc-doc-page-container">
        <li class="rtc-doc-sign-signature">virtual void OnMediaRelayError(int error_code, const std::string& error_message) = 0</li>
    </li>
<li class="rtc-doc-page-description">
    <div class="rtc-doc-desc-wrap">
        <p>接口失败回调</p>
    </div>
    <table class="rtc-doc-code-table">
        <thead>
            <tr>
                <th>code</th>
                <th>describe</th>
                <th>message</th>
            </tr>
        </thead>
        <tbody>
                <tr>
                    <td>Err_Invalid_Client_Mode</td>
                    <td>使用场景不符</td>
                    <td>请确认当前场景为互动直播，通信场景不支持角色设置</td>
                </tr>
                <tr>
                    <td>Err_Invalid_Client_Role</td>
                    <td>用户角色不符</td>
                    <td>请确认当前角色为主播，观众角色不支持跨房媒体转发</td>
                </tr>
                <tr>
                    <td>Err_Relay_Token_Invalid</td>
                    <td>Token 验证失败</td>
                    <td>请确认 Token 是否正确</td>
                </tr>
        </tbody>
    </table>
<div class="rtc-doc-parameters-title">Parameters</div>
<ul class="rtc-doc-parameters">
    <li>
        <div>
            error_code: int
        </div>
                <p>错误码</p>
    </li>
    <li>
        <div>
            error_message: string
        </div>
                <p>错误描述</p>
    </li>
</ul>
</li>
</ul>
</section>
</div>


