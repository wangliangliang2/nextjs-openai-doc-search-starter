图片审核（`ali-image-audit`）能够有效帮助您检测出您的图片中是否存在违规的风险内容，支持识别的类型包括色情，暴恐，广告，二维码，不良场景和图片logo识别。

本服务由`阿里云计算有限公司`（以下简称`阿里云`）提供。启用服务后，您存储在七牛云空间的文件将在您主动请求的情况下被提供给阿里云以供其计算使用。七牛不能保证鉴别结果的正确性，请您自行评估后选择是否启用。服务价格请您参考具体的服务价格，您使用本服务产生的费用由七牛代收。启用服务则表示您知晓并同意以上内容。

**注意**

- 服务地域：华东，东南亚
- 单张图片大小不超过 10MB。
- 资源的 Mime 文件格式仅支持图片类型：image/*，如：image/jpeg、image/png。
- 请求接口的并发（qps）不超过100。
- 请求接口为标准的HTTP/HTTPS 协议。



# 请求 

## 请求语法

```
GET <scanRquestUrl>?ali-image-audit/scenes/<scenes>
Host: <BucketHost>
```
## 请求参数
| 字段           |  类型  | 是否必选 |                       说明                       |
| ------------- | :----: | :------: | :----------------------------------------------: |
| scanRquestUrl | string |    N     | 用于检测的图片链接 |
| scenes        | string |    N     | 指定检测场景。取值:"porn", "terrorism", "ad", "qrcode" , "live", "logo" 指定检测场景,用 `,`分割。例如:`ali-image-audit/scenes/ad,logo` |

# 响应 

## 响应语法

```
HTTP/1.1 200 OK
X-Reqid: <reqid>
Date: <respTime>
Content-Length: <contentLength>
Content-Type: text/plain; charset=utf-8
{
    // respDate
}
```

## 示例
在Web浏览器中输入以下视频地址：
```
https://dora-doc.qiniu.com/upload.jpg?ali-image-audit/scenes/ad,logo

```

返回结果
```
HTTP/1.1 200 OK
X-Reqid: ***
Date: Thu, 25 Jul 2019 12:16:45 GMT
Content-Length: 266
Content-Type: application/json; charset=utf-8
{
    "code": 200,
    "data": [
        {
            "code": 200,
            "msg": "OK",
            "results": [
                {
                    "label": "normal",
                    "rate": 99.91,
                    "scene": "ad",
                    "suggestion": "pass"
                },
                {
                    "label": "normal",
                    "rate": 97.00,
                    "scene": "logo",
                    "suggestion": "pass"
                }
            ],
            "taskId": "****"
        }
    ],
    "msg": "OK",
    "requestId": "******"
}
```

**公共头响应头参数说明**

| 字段      |   类型   | 是否必选 |                                                                 说明                                                                 |
| --------- | :------: | :------: | :----------------------------------------------------------------------------------------------------------------------------------: |
| code      |   整型   |    Y     | 错误码，和HTTP状态码一致（但有扩展）。<br>• 2xx 表示成功。<br>• 4xx 表示请求有误。<br>• 5xx 表示后端有误。<br>具体参照公共错误码说明 |
| msg       |  字符串  |    Y     |                                                          错误的进一步描述。                                                          |
| requestId |  字符串  |    Y     |                                                           唯一标识该请求的ID，可用于定位问题。                                                          |   
| data      | JSON对象 |    Y     |               API（业务）相关的返回数据。出错情况下，该字段可能为空。一般来说，该字段为一个JSON结构体或数组，参见下表                |

**响应返回的data参数说明**

| 字段    |   类型   | 是否必选 |                                                       说明                                                       |
| ------- | :------: | :------: | :--------------------------------------------------------------------------------------------------------------: |
| code    |   整型   |    Y     |                                        错误码，和HTTP的status code一致。                                         |
| msg     |  字符串  |    Y     |                                                错误的进一步描述。                                                |
| taskId  |  字符串  |    Y     |                                                 该检测任务的ID。                                                 |
| results | JSON数组 |    N     | 返回结果。调用成功时（code=200），返回结果中包含一个或多个元素。每个元素是个结构体，具体结构描述见result结构表。 |

**响应返回的results中JSON对象结构说明**

| 字段       |   类型   | 是否必选 |                                                               说明                                                               |
| ---------- | :------: | :------: | :------------------------------------------------------------------------------------------------------------------------------: |
| label      |  字符串  |    Y     |                                检测结果的分类，与具体的scene对应。取值范围参考scene和label说明。                                 |
| scene      |  字符串  |    Y     |                                          检测场景，和调用请求中的场景对应（ad）。                                          |
| suggestion |  字符串  |    Y     |                        建议的结果，取值范围：<br>• pass：正常<br>• review：疑似违规<br>• block：确认违规                         |
| rate       |  浮点数  |    Y     | 结果为该分类的概率，取值范围为[0.00-100.00]。值越高，表示越有可能属于该分类。 说明 分值仅供参考，建议关注label和suggestion内容。 |

**detail结构体说明**

| 字段     |  类型  | 是否必选 |                                 说明                                  |
| -------- | :----: | :------: | :-------------------------------------------------------------------: |
| label    | 字符串 |    Y     | 图片的分类，与具体的scene对应。取值范围参考scene和label说明。 |
| contexts |  数组  |    N     |          命中该风险的上下文信息。具体结构描述见context说明。          |

**scenes和label说明**

| 功能         |  scene   |                                                                                                                      label                                                                                                                       |
| ------------ | :------: | :----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------: |
| 图片广告检测 | ad | • normal：正常图片<br>• politics：文字含涉政内容<br>• porn：文字含涉黄内容<br>• abuse：文字含辱骂内容<br>• terrorism：文字含暴恐内容<br>• contraband：文字含违禁内容<br>• spam：文字含其他垃圾内容<br>• npx：牛皮藓广告<br>• qrcode：包含二维码<br>• programCode：包含小程序码<br>• ad：其他广告 |
| 图片暴恐涉政 | terrorism | • normal：正常 <br>• bloody：血腥 <br>• explosion：爆炸烟光 <br>• outfit：特殊装束 <br>• logo：特殊标识 <br>• weapon：武器 <br>• politics：涉政 <br>• violence ：打斗 <br>• crowd：聚众 <br>• parade：游行 <br>• carcrash：车祸现场 <br>• flag：旗帜 <br>• location：地标 <br>• others：其他 <br> |
| 图片智能鉴黄 | porn | • normal：正常<br>•sexy：性感<br>•porn：色情 |
| 图片二维码 | qrcode | • normal：正常<br>• qrcode：含二维码<br>• programCode：含小程序码<br>|
| 图片不良场景 | live | • normal：正常<br>• meaningless：图片中无内容（例如，黑屏、白屏）<br>• PIP：画中画<br>• smoking：吸烟<br>• drivelive：车内直播 <br>|
| 图片logo | logo | • normal：正常<br>• TV：含受管控的logo<br>• trademark：含商标<br> |


# 服务价格
**注意 ：** 计费次数按照审核的类型进行统计

| 地域     |  次数  | 价格 |    
| -------- | :----: | :------: | 
| 海外    | 0-1000w次 |    1.2元/千次    | 
| 海外    | 1000w次-3000w次 |    1元/千次    | 
| 海外    | 3000w次-8000w次 |    0.8元/千次    | 
| 海外    | 8000w次以上 |    0.7元/千次    | 
| 国内    | 0-1000w次 |    0.8元/千次    | 
| 国内    | 1000w次-3000w次 |    0.6元/千次    | 
| 国内   | 3000w次-8000w次 |    0.5元/千次    | 
| 国内    | 8000w次以上 |    0.4元/千次    |  



# 计费示例

某公司2019年5月在海外节点使用该服务，共发起50万次鉴黄请求，50万次鉴暴恐请求，则当月使用该服务的费用为`1000*1.2=1200.0元`
