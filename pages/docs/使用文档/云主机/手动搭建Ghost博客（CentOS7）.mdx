  <div>      <main role="main">         <article role="article" aria-labelledby="title_uad_q7h_h4d">            	                        	            	            <div>               <p class="shortdesc">Ghost是一个基于Node.js开发的免费开源博客平台，用于简化个人博客和在线出版物的在线发布过程。本文介绍了在CentOS 7操作系统的QVM实例上部署Ghost博客的详细步骤。</p>               		               <div>                  <div>                     <h1 font-weigh = "bold">前提条件</h1>                  </div>                  			                  <p class="p" cond-props="china" id="p-mcj-d0z-980">使用本教程进行操作前，请确保您已经注册了七牛云账号。如还未注册，请先完成<a href="https://portal.qiniu.com/signup?ref=developer.qiniu.comregister.htm?" target="_blank">账号注册</a>。                  </p>                  			                  			                  		               </div>               		               <section class="section context" id="context-snn-bz0-xbh">                  <div>                     <h1 font-weigh = "bold">背景信息</h1>                  </div>                  			                  <div>随着业务的扩展，您可以使用七牛云的产品平台，平滑地横向和纵向扩展服务容量，例如：                      				                     <ul class="ul" id="ul-wvu-x84-yy7">                        					                        <li>扩展单个QVM实例的CPU和内存规格，增强服务器的处理能力。</li>                        					                        <li>增加多台QVM实例，并利用负载均衡，在多个实例中进行负载的均衡分配。</li>                        					                        <li>利用弹性伸缩（Auto Scaling），根据业务量自动增加或减少QVM实例的数量。</li>                        					                        <li>利用对象存储OSS（Object Storage Service），存储静态网页和海量图片、视频等。</li>                        				                     </ul>                     			                  </div>                  			                  <p class="p" id="p-e3h-6se-ov4">本文将使用一台实例规格为ecs.c6.large的QVM实例搭建Ghost博客，适用于初次使用七牛云进行建站的个人用户。</p>                  			                  <div>                     <div><i class="icon-note notice"></i></div>                     <div><strong>注意</strong> 搭建Ghost博客分为开发模式（development）和生产模式（production），建议您在第一次搭建Ghost博客时使用开发模式，方便对Ghost博客的调试。                     </div>                  </div>                  		               </section>               		               <section class="section" id="section-uei-jeb-jyf">                  <h1 font-weigh = "bold">操作步骤</h1>                  			                  			                  <div>使用云服务器QVM搭建Ghost网站的操作步骤如下：                      				                     <ul class="ul" id="ol-yt2-w10-3g5">                        					                        <li><a title="" href="#section-lll-v4o-d8l">步骤一：创建Linux实例</a></li>                        					                        <li><a title="" href="#section-3as-stl-g30">步骤二：部署Web环境</a></li>                        					                        <li><a title="" href="#section-ab9-fr6-oj6">步骤三：安装Ghost</a></li>                        					                        <li><a title="" href="#section-vhr-y2k-pga">步骤四：购买域名</a></li>                        					                        <li><a title="" href="#section-6ph-sb6-rb4">步骤五：备案</a></li>                        					                        <li><a title="" href="#section-b35-s43-byu">步骤六：配置域名解析</a></li>                        				                     </ul>                     			                  </div>                  		               </section>               		               <section class="section" id="section-lll-v4o-d8l">                  <h1 font-weigh = "bold">步骤一：创建Linux实例</h1>                  			                  			                  <div>本节介绍如何创建实例。对于个人使用的小型网站，一台QVM实例可以满足基本需求。                      				                     <ul class="ul" id="ul-m7w-uxb-aom">                        					                        <li>创建一台Linux实例。               </li>                             </li>                        				                     </ul>                     			                  </div>                  			                  <div>在配置参数时，您需要注意以下几点：                      				                     <ul class="ul" id="ul-f08-wfy-xm7">                        					                        <li><span>实例</span>：对于个人网站，实例规格为<span>1vCPU 2GiB</span>或<span>2vCPU 4GiB</span>就能满足基本需求。关             </li>                        					                        <li><span>网络</span>：选择<span>专有网络</span>。                        </li>                        					                        <li><span>公网带宽</span>：本文选择<span>分配公网IPv4地址</span>。如果不选中，表示不为实例分配公网IP地址。QVM实例如需访问公网，需要配置并绑定弹性公网IP地址。请根据实际需求进行选择。                        </li>                        					                        <li><span>镜像</span>：本文选择公共镜像中的Linux操作系统，例如：CentOS 7.2 64位。                        </li>                        				                     </ul>                     			                  </div>                  			                  <p class="p" id="p-3ii-6ec-sz7">实例创建完成后，您会收到短信和邮件通知，告知您的实例名称、公网IP地址、内网IP地址等信息。您可以使用这些信息登录并管理实例。</p>                  			                  <p class="p" id="p-kuh-q5a-rm2">很多重要信息都是通过绑定手机的短信接收，并且重要的操作（例如重启、停止等）都需要手机接收验证码，因此请务必保持绑定手机通信畅通。</p>                  		               </section>               		               <section class="section" id="section-3as-stl-g30">                  <h1 font-weigh = "bold">步骤二：部署Web环境</h1>                  			                  			                  <p class="p" id="p-qxy-jzc-vn8">本节以安装Nginx为例介绍如何部署Web环境。</p>                  			                  <div>部署Web环境之前，请确认以下信息：                      				                     <ul class="ul" id="ul-28h-r20-qfo">                        					                        <li>您的实例可以连接公网。</li>                        					                        <li>已安装用于连接Linux实例的工具，例如：SecureCRT。</li>                        				                     </ul>                     			                  </div>                  			                  <ol class="ol steps" id="steps-r37-6mn-5m2">                     <li><span>打开SecureCRT ，设置登录实例所需的信息。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-4qn-e3q-etp">                           						                           <li><span>设置连接名称。</span></li>                           						                           <li><span>协议选择<span>SSH</span>。</span></li>                           						                           <li><span>输入主机IP地址和用户。</span></li>                           						                           <li><span>单击<span>确定</span>保存。</span></li>                           					                        </ol>                        					                        <div><img class="image break" id="image-i99-12i-1ft" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/hi3RaNz8dFx6K9Mp2Ylm.png" width="420" alt="设置登录信息"></div>                        				                     </li>                     <li><span>输入用户名root和登录密码。</span>                        					                        <div><img class="image break" id="image-opq-hfe-nc0" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/bWA6uEnHUQXG5a723elj.png" alt="输入用户名密码"></div>                        				                     </li>                     <li><span>添加Nginx软件库。</span>                        					                        <div>                           						<pre><code>rpm -Uvh http://nginx.org/packages/centos/7/noarch/RPMS/nginx-release-centos-7-0.el7.ngx.noarch.rpm</code></pre>                           						<div>软件包中包含的软件及版本为：nginx/1.10.2                               							                              <div>                                 <div><i class="icon-note note"></i></div>                                 <div><strong>说明</strong> 您下载的版本可能与此不同，请以实际情况为准。                                 </div>                              </div>                              						                           </div>                           					                        </div>                        				                     </li>                     <li><span>安装Nginx。</span>                        					                        <div>                           						<pre><code>yum -y install nginx</code></pre>                           					</div>                        				                     </li>                     <li><span>设置Nginx服务器自动启动。</span>                        					                        <div>                           						<pre><code>systemctl enable nginx.service</code></pre>                           					</div>                        				                     </li>                     <li><span>启动Nginx并查看Nginx服务状态。</span>                        					                        <div>                           						<pre><code>systemctl start nginx.service
systemctl status nginx.service</code></pre>                           					</div>                        				                     </li>                     <li><span>在浏览器中输入IP地址，可以看到默认的Nginx网页。</span>                        					                        <div><img class="image break" id="image-jsf-uzv-l1q" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/BOKZTfaqExDzFbvwuto4.png" width="420" alt="nginx网页"></div>                        				                     </li>                  </ol>                  		               </section>               		               <section class="section" id="section-ab9-fr6-oj6">                  <h1 font-weigh = "bold">步骤三：安装Ghost</h1>                  			                  			                  <ol class="ol steps" id="steps-03k-huc-pil">                     <li><span>更新系统。确保您的服务器系统处于最新状态。</span>                        					                        <div>                           						<pre><code>yum -y update</code></pre>                           					</div>                        				                     </li>                     <li><span>安装Node.js。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-yvr-1lx-l6x">                           						                           <li><span>安装EPEL。</span>                              							                              <div>                                 								<pre><code>yum install epel-release -y</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>安装Node.js和npm。</span>                              							                              <div>                                 								<pre><code>yum install nodejs npm --enablerepo=epel</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>安装node.js管理工具。</span>                              							                              <div>                                 								<pre><code>npm install -g n</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>安装稳定版本的node.js。</span>                              							                              <div>本示例安装node.js的版本为<code>12.16.3</code>。                                  								<pre><code>n 12.16.3</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>运行命令<span>n</span>，选择已安装的node.js 12.16.3版本。</span></li>                           						                           <li><span>编辑环境配置文件。</span>                              							                              <div>                                 								<pre><code>vim ~/.bash_profile</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>按<kbd>i</kbd>进入编辑模式，在文件末尾添加下列信息。</span>                              							                              <div>                                 								<pre><code>export N_PREFIX=/usr/local/bin/node
export PATH=$N_PREFIX/bin:$PATH</code></pre>                                 编辑完成后按<kbd>esc</kbd>键，输入<code>:wq</code>保存并退出文件。                              </div>                              						                           </li>                           						                           <li><span>执行以下命令使配置生效。</span>                              							                              <div>                                 								<pre><code>source ~/.bash_profile</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>安装进程管理器，来控制Node.js应用程序。</span>                              							                              <div>进程管理器可以保持应用程序一直处于运行状态。                                  								<pre><code>npm install pm2 -g</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>运行<code>node -v</code>和<code>npm -v</code>命令，检查Node.js的版本。</span></li>                           					                        </ol>                        				                     </li>                     <li><span>安装Ghost。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-fmv-qao-jt8">                           						                           <li><span>创建Ghost安装目录。</span>                              							                              <div>                                 								<pre><code>mkdir -p /var/www/ghost</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>进入Ghost安装目录，下载最新版本的Ghost安装包。</span>                              							                              <div>                                 								<pre><code>cd /var/www/ghostwget https://ghost.org/zip/ghost-latest.zipmv ghost-latest.zip ghost.zip</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>解压Ghost安装包。</span>                              							                              <div>                                 								<pre><code>yum install unzip -y
unzip ghost.zip</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>安装gcc和c++编译器。</span>                              							                              <div>                                 								<pre><code>yum -y install gcc gcc-c++</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>使用npm安装Ghost。 </span>                              							                              <div>                                 								<pre><code>npm install -production</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>运行<code>npm start</code>命令启动Ghost，检查是否安装成功。</span>                              							                              <div>启动成功示例如下，您可以按<kbd>Ctrl+C</kbd>组合键关闭Ghost。                                  								<pre><code>[2020-04-13 04:00:01] INFO Ghost is running in development...
[2020-04-13 04:00:01] INFO Listening on: 127.0.0.1:2368
[2020-04-13 04:00:01] INFO Url configured as: http://121.196.*.*/
[2020-04-13 04:00:01] INFO Ctrl+C to shut down
[2020-04-13 04:00:01] INFO Ghost boot 2.185s</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>修改<span>/var/www/ghost/core/server/config/env</span>目录下的<span>config.development.json</span>文件。</span>                              							                              <div>                                 								<pre><code>vi /var/www/ghost/core/server/config/env/config.development.json</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>配置<span>config.development.json</span>文件中的<span>URL</span>为Ghost博客的域名。 </span>                              							                              <div><img class="image break" id="image-tu0-v85-zal" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/LvBmjZOpR5sxrXeGAiNY.png" alt="ghost1">
按下<kbd>esc</kbd>退出编辑模式，并输入<code>:wq</code>保存并退出。                              </div>                              						                           </li>                           						                           						                           						                           					                        </ol>                        				                     </li>                     <li><span>配置Nginx作为Ghost的反向代理。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-poo-3r8-i43">                           						                           <li><span>进入Nginx配置目录。</span>                              							                              <div>                                 								<pre><code>cd /etc/nginx/conf.d/</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>新建Ghost博客的Nginx配置文件。</span>                              							                              <div>                                 								<pre><code>vim /etc/nginx/conf.d/ghost.conf</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>将以下内容输入到<span>ghost.conf</span>中，把<span>server_name</span>改成Ghost实际的域名。</span>                              							                              <div>                                 								<pre><code>upstream ghost {
    server 127.0.0.1:2368;
}
server {
    listen      80;
    server_name myghostblog.com;

    access_log  /var/log/nginx/ghost.access.log;
    error_log   /var/log/nginx/ghost.error.log;

    proxy_buffers 16 64k;
    proxy_buffer_size 128k;

    location / {
        proxy_pass  http://ghost;
        proxy_next_upstream error timeout invalid_header http_500 http_502 http_503 http_504;
        proxy_redirect off;

        proxy_set_header    Host            $host;
        proxy_set_header    X-Real-IP       $remote_addr;
        proxy_set_header    X-Forwarded-For $proxy_add_X_forwarded_for;
        proxy_set_header    X-Forwarded-Proto https;
    }
}</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>修改默认的配置文件<span>default.conf</span>为<span>default.conf.bak</span>，使Nginx只应用于<span>ghost.conf</span>。</span>                              							                              <div>                                 								<pre><code>mv default.conf default.conf.bak</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>重启Nginx服务。</span>                              							                              <div>                                 								<pre><code>systemctl restart nginx.service</code></pre>                                 							</div>                              						                           </li>                           					                        </ol>                        				                     </li>                     <li><span>启动Ghost。</span>                        					                        <div>                           						<pre><code>cd /var/www/ghost/
npm start</code></pre>                           					</div>                        				                     </li>                     <li><span>访问Ghost博客。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-3u6-4hz-d73">                           						                           <li><span>在浏览器输入<span>http://公网IP</span>或<span>http://域名</span>，访问Ghost。</span>                              							                              <div><img class="image break" id="image-1cp-ss7-ksh" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/4tkGcOl93KW6BF1HCgfr.png" width="420" alt="Ghost网页">                                 								                                 <div>                                    <div><i class="icon-note note"></i></div>                                    <div><strong>说明</strong> 如果访问出现502，请检查是否是防火墙的问题，可以关闭防火墙。                                    </div>                                 </div>                                 							                              </div>                              						                           </li>                           						                           <li><span>如果需要对博客进行编辑修改，在浏览器输入<span>http://公网IP/ghost</span>。</span>                              							                              <div><img class="image break" id="image-9oa-s4u-2ji" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/6u9IF48O5Kf0oeX7AG32.png" width="420" alt="修改博客"></div>                              						                           </li>                           					                        </ol>                        				                     </li>                  </ol>                  		               </section>               		               <section class="section" id="section-vhr-y2k-pga">                  <h1 font-weigh = "bold">步骤四：购买域名</h1>                  			                  			                  <p class="p" id="p-4fc-ojf-72k">您可以给自己的网站设定一个单独的域名。这样您的用户可以使用易记的域名访问您的网站，而不需要使用复杂的IP地址。</p>                  			                  <p class="p" id="p-iye-m9s-bst">                </p>                  			                  		               </section>               		               <section class="section" id="section-6ph-sb6-rb4">                  <h1 font-weigh = "bold">步骤五：备案</h1>                  			                  			                  <p class="p" id="p-zo5-kz4-jul">对于域名指向中国内地服务器的网站，必须进行网站备案。在域名获得备案号之前，网站无法开通使用。<span>如果您是首次备案，请参见<a title="如果您的网站托管在七牛云节点服务器上，且网站的主办人和域名从未办理过备案，在网站开通服务前，您需通过七牛云ICP代备案系统完成ICP备案。" href="https://developer.qiniu.com/qvm/manual/4184/qvm-first-guide">首次备案</a>，其他情况请参见<a title="网站托管在的服务器上，您需根据所在省市的管局规则进行备案申请。当您使用七牛云节点服务器时，您可以在PC端或移动端的七牛云ICP代备案系统中提交ICP备案申请，审核通过便可开通网站访问服务。本文为您介绍在七牛云备案系统提交ICP备案的流程及注意事项。" href="https://developer.qiniu.com/qvm/manual/4294/record-introduction">ICP备案流程概述</a>。</span></p>                  			                  <p class="p" id="p-wsh-dh0-a8s">七牛云有代备案系统，方便您进行备案。备案免费，审核时间一般为20天左右，请您耐心等待。</p>                  			                  		               </section>               		               <section class="section" id="section-b35-s43-byu">                  <h1 font-weigh = "bold">步骤六：配置域名解析</h1>                  			                  			                  <p class="p" id="p-ldv-t9b-o4e">您需要在域名商配置域名解析之后，用户才能通过域名访问您的网站。               </p>                  			                  		               </section>               	            </div>                     </article>      </main>   <script>$icmsDocProps={'productMethod':'created','language':'zh-CN',};</script></div>  </div>  	