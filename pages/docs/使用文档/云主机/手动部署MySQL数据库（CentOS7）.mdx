<div> <main role="main"> <article role="article" aria-labelledby="title_r0i_om5_h2o"> <div> <p class="shortdesc">MySQL是一个关系型数据库管理系统，常用于LAMP和LNMP等网站场景中。本教程介绍如何在Linux系统QVM实例上安装、配置以及远程访问MySQL数据库。</p> <div> <div> <h1 font-weigh = "bold">前提条件</h1> </div> <ul class="ul" id="ul-uok-gz3-pc4"> <li>已注册七牛云账号。如还未注册，请先完成<span><a href="https://portal.qiniu.com/signup?ref=developer.qiniu.comregister.htm?" target="_blank">账号注册</a></span>。 </li> <li>如果在中国内地地域中使用云服务器QVM，请确保账号已完成实名认证。<span>如还未认证，请先完成实名认证</span>。</span></li> <li>已创建一台QVM实例</span>。 </li> </ul> </div> <section class="section context" id="context-jvw-iqx-zsv"> <div> <h1 font-weigh = "bold">背景信息</h1> </div> <div>本教程在示例步骤中使用了以下实例规格和版本软件。实际操作时，请以您的软件版本为准。 <ul class="ul" id="ul-w3h-vc1-3y5"> <li>实例规格：ecs.c6.large（2 vCPU，4 GiB内存）</li> <li>操作系统：公共镜像CentOS 7.2 64位</li> <li>MySQL：5.7.26 <div>本示例中，MySQL相关安装路径说明如下： <ul class="ul" id="ul-l55-2fd-pme"> <li>配置文件：<span>/etc/my.cnf</span></li> <li>数据存储：<span>/var/lib/mysql</span></li> <li>命令文件：<span>/usr/bin</span>和<span>/usr/sbin</span></li> </ul> </div> </li> <li>数据库端口：3306 <div> <div><i class="icon-note note"></i></div> <div><strong>说明</strong> 您需要在QVM实例所使用的安全组入方向添加规则并放行3306端口。</span>。 </div> </div> </li> </ul> </div> </section> <section class="section" id="section-fe0-pfu-e7r"> <h1 font-weigh = "bold">步骤一：准备环境</h1> <p class="p" id="p-gbb-etm-f9v">连接您的QVM实例</span>。 </p> </section> <section class="section" id="section-jg8-cz7-8pw"> <h1 font-weigh = "bold">步骤二：安装MySQL</h1> <ol class="ol steps" id="steps-ouh-ddn-crh"> <li><span>运行以下命令更新YUM源。</span><div><pre><code>rpm -Uvh http://dev.mysql.com/get/mysql57-community-release-el7-9.noarch.rpm</code></pre></div> </li> <li><span>运行以下命令安装MySQL。 </span><div><pre><code>yum module disable mysql
yum -y install mysql-community-server
</code></pre></div> </li> <li><span>运行以下命令查看MySQL版本号。</span><div><pre><code>mysql -V</code></pre></div> <div>返回结果如下，表示MySQL安装成功。 <pre><code>mysql Ver 14.14 Distrib 5.7.26, for Linux (x86_64) using EditLine wrapper</code></pre></div> </li> </ol> </section> <section class="section" id="section-gsn-kwf-xxy"> 

	<h1 font-weigh = "bold">步骤三：配置MySQL</h1> <ol class="ol steps" id="steps-pwn-pn0-bbe"> <li><span>运行以下命令启动MySQL服务。 </span><div><pre><code>systemctl start mysqld</code></pre></div> </li> <li><span>运行以下命令设置MySQL服务开机自启动。 </span><div><pre><code>systemctl enable mysqld</code></pre></div> </li> <li><span>运行以下命令查看<span>/var/log/mysqld.log</span>文件，获取并记录root用户的初始密码。 </span><div><pre><code>grep 'temporary password' /var/log/mysqld.log</code></pre>执行​命令结果示例如下。 <pre><code>2020-04-08T08:12:07.893939Z 1 [Note] A temporary password is generated for root@localhost: xvlo1lZs7&gt;uI</code></pre><div> <div><i class="icon-note note"></i></div> <div><strong>说明</strong> 下一步对MySQL进行安全性配置时，会使用该初始密码。 </div> </div> </div> </li> <li><span>运行下列命令对MySQL进行安全性配置。 </span><div><pre><code>mysql_secure_installation</code></pre></div> 
	
<ol type="a" class="ol substeps" id="substeps-s2m-0by-qgf"> 
<li><span>重置root用户的密码。 </span><div><pre><code>Enter password for user root: #输入上一步获取的root用户初始密码
The 'validate_password' plugin is installed on the server.
The subsequent steps will run with the existing configuration of the plugin.
Using existing password for root.
Estimated strength of the password: 100 
Change the password for root ? ((Press y|Y for Yes, any other key for No) : Y #是否更改root用户密码，输入Y
New password: #输入新密码，长度为8至30个字符，必须同时包含大小写英文字母、数字和特殊符号。特殊符号可以是()` ~!@#$%^&*-+=|{}[]:;‘<>,.?/
Re-enter new password: #再次输入新密码
Estimated strength of the password: 100 
Do you wish to continue with the password provided?(Press y|Y for Yes, any other key for No) : Y #是否继续操作，输入Y</code></pre>

</div> </li> <li><span>删除匿名用户账号。 </span><div><pre><code>By default, a MySQL installation has an anonymous user, allowing anyone to log into MySQL without having to have a user account created for them. This is intended only for testing, and to make the installation go a bit smoother. You should remove them before moving into a production environment.
Remove anonymous users? (Press y|Y for Yes, any other key for No) : Y  #是否删除匿名用户，输入Y
Success.</code></pre></div> </li> <li><span>禁止root账号远程登录。 </span><div><pre><code>Disallow root login remotely? (Press y|Y for Yes, any other key for No) : Y #禁止root远程登录，输入Y
Success.</code></pre></div> </li> <li><span>删除test库以及对test库的访问权限。 </span><div><pre><code>Remove test database and access to it? (Press y|Y for Yes, any other key for No) : Y #是否删除test库和对它的访问权限，输入Y
Dropping test database...
Success.</code></pre></div> </li> <li><span>重新加载授权表。 </span><div><pre><code>Reload privilege tables now? (Press y|Y for Yes, any other key for No) : Y #是否重新加载授权表，输入Y
Success.
All done!</code></pre></div> </li> </ol> <div>安全性配置的更多详情，请参见<span><a href="https://dev.mysql.com/doc/refman/5.7/en/mysql-secure-installation.html" target="_blank">MySQL官方文档</a></span>。 </div> </li> </ol> </section> <section class="section" id="section-jcj-rd6-yih"> 
	
<h1 font-weigh = "bold">步骤四：远程访问MySQL数据库</h1> <p class="p" id="p-p6s-0i6-3xw">您可以使用数据库客户端来远程访问MySQL数据库。 </p> <ol class="ol steps" id="steps-sv7-55w-waq"> <li><span>在QVM实例上，创建远程登录MySQL的账号。</span><ol type="a" class="ol substeps" id="substeps-m09-amf-923"> <li><span>运行以下命令后，输入root用户的密码登录MySQL。 </span><div><pre><code> mysql -uroot -p</code></pre></div> </li> <li><span>依次运行以下命令创建远程登录MySQL的账号。示例账号为<code>dms</code>、密码为<code>123456</code>。 </span><div><pre><code>mysql&gt; grant all on *.* to 'dms'@'%' IDENTIFIED BY '123456'; #使用root替换dms，可设置为允许root账号远程登录。mysql&gt; flush privileges;</code></pre><div> <div><i class="icon-note note"></i></div> <div><strong>说明</strong> <ul class="ul" id="ul-22u-ygd-vzn"> <li>建议您使用非root账号远程登录MySQL数据库。</li> <li>实际创建账号时，需将<code>123456</code>更换为符合要求的密码： 长度为8至30个字符，必须同时包含大小写英文字母、数字和特殊符号。可以使用以下特殊符号： <p class="p" id="p-zns-afl-ng9"><code>()` ~!@#$%^&amp;*-+=|{}[]:;‘&lt;&gt;,.?/</code></p> </li> </ul> </div> </div> </div> </li> </article> </main> </div> </div>