  <div>      <main role="main">         <article role="article" aria-labelledby="title_tar_qnt_zwg">            	                        	            	            <div>               <p class="shortdesc">本文介绍如何在CentOS 7系统的QVM实例上使用Nginx搭建多个Web站点。</p>               		               <div>                  <div>                     <h1 font-weigh = "bold">前提条件</h1>                  </div>                  			                  <ul class="ul" id="ul-eq0-fa0-fr9">                     				                     <li>已注册七牛云账号。如还未注册，请先完成<a href="https://portal.qiniu.com/signup?ref=developer.qiniu.comregister.htm?" target="_blank">账号注册</a>。                     </li>                     				                     				                     				                     <li>已创建分配公网IP的QVM实例，并部署了LNMP环境，具体操作请参见<a title="Nginx是一款小巧而高效的Web服务器软件，可帮您在Linux系统下快速方便地搭建出LNMP Web服务环境。本教程介绍如何手动在QVM实例上搭建LNMP环境，其中LNMP分别代表Linux、Nginx、MySQL和PHP。" href="https://developer.qiniu.com/qvm/manual/7073/manual-deployment-lnmp-environment-centos-7">手动部署LNMP环境（CentOS 7）</a>。                     </li>                     			                  </ul>                  		               </div>               		               <section class="section context" id="context-qap-a7k-0oa">                  <div>                     <h1 font-weigh = "bold">背景信息</h1>                  </div>                  			                  <p class="p" id="p-e6p-xl6-i4x">本教程适用于熟悉Linux操作系统，希望合理利用资源、统一管理站点以提高运维效率的用户。比如，您可以在一台云服务器上配置多个不同分类的博客平台或者搭建多个Web站点实现复杂业务的网站系统。</p>                  			                  <p class="p" id="p-hmh-rod-23g">教程中，将在一台已部署LNMP环境的实例上同时搭建两个测试站点<span>Testpage-1</span>和<span>Testpage-2</span>，并访问对应的站点。                  </p>                  			                  <div>本教程示例步骤中使用的实例配置信息如下。                      				                     <ul class="ul" id="ul-w2c-vc6-pev">                        					                        <li>实例规格：ecs.c6.large</li>                        					                        <li>操作系统：CentOS 7.8 64位</li>                        				                     </ul>                     			                  </div>                  		               </section>               		               <section class="section" id="section-qc8-e3g-b8p">                  <h1 font-weigh = "bold">创建测试站点</h1>                  			                  			                  <ol class="ol steps" id="steps-xnm-nzc-46q">                     <li><span>远程连接已部署LNMP环境的QVM实例。</span>                        					                        <div>                        </div>                        				                     </li>                     <li><span>运行以下命令进入已配置好的网站根目录。</span>                        					                        <div>                           						<pre><code>cd /usr/share/nginx/html</code></pre>                           					</div>                        				                     </li>                     <li><span>运行以下命令创建两个测试文件夹。</span>                        					                        <div>文件夹中用于存放测试网站信息，即存放项目代码。                            						<pre><code>mkdir Testpage-1mkdir Testpage-2</code></pre>                           					</div>                        				                     </li>                     <li><span>配置测试站点<span>Testpage-1</span>的信息。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-7dc-ar2-mzo">                           						                           <li><span>运行以下命令进入<span>Testpage-1</span>。</span>                              							                              <div>                                 								<pre><code>cd /usr/share/nginx/html/Testpage-1/</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>运行以下命令创建并编辑<code>index.html</code>文件。</span>                              							                              <div>                                 								<pre><code>vim index.html</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>按<kbd>i</kbd>进入编辑模式，输入以下测试内容。</span>                              							                              <div>                                 								<pre><code>Test page 1</code></pre>                                 编辑完成后，按<kbd>Esc</kbd>键，并输入<kbd>:wq</kbd>后按下回车键，保存并退出。                              </div>                              						                           </li>                           					                        </ol>                        				                     </li>                     <li><span>配置测试站点<span>Testpage-2</span>的信息。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-9dm-o6e-lle">                           						                           <li><span>运行以下命令进入<span>Testpage-2</span>。</span>                              							                              <div>                                 								<pre><code>cd /usr/share/nginx/html/Testpage-2/</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>运行以下命令创建并编辑<code>index.html</code>文件。</span>                              							                              <div>                                 								<pre><code>vim index.html</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>按<kbd>i</kbd>进入编辑模式，输入以下测试内容。</span>                              							                              <div>                                 								<pre><code>Test page 2</code></pre>                                 编辑完成后，按<kbd>Esc</kbd>键，并输入<kbd>:wq</kbd>后按下回车键，保存并退出。                              </div>                              						                           </li>                           					                        </ol>                        				                     </li>                  </ol>                  		               </section>               		               <section class="section" id="section-cqq-02l-7ln">                  <h1 font-weigh = "bold">配置Nginx</h1>                  			                  			                  <ol class="ol steps" id="steps-a9w-1pu-m84">                     <li><span>运行一下命令查看<span>nginx.conf</span>配置文件。</span>                        					                        <div>                           						<pre><code>cat /etc/nginx/nginx.conf</code></pre>                           					</div>                        					                        <div>在<code>http{}</code>模块内，查看<code>include</code>配置信息。                            						                           <div>本示例中配置如下图所示，<code>include /etc/nginx/conf.d/*.conf;</code>表示Nginx将会从该路径下的所有<span>.conf</span>文件获取站点信息。<img class="image break" id="image-6sd-2vc-ah6" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/j9YdHsf2tMWSVNoJePpn.png" alt="nginx.conf"></div>                           					                        </div>                        				                     </li>                     <li><span>运行以下命令进入<span>/etc/nginx/conf.d</span>路径下。</span>                        					                        <div>                           						<pre><code>cd /etc/nginx/conf.d</code></pre>                           					</div>                        				                     </li>                     <li><span>为测试站点<span>Testpage-1</span>创建并配置Nginx配置文件。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-x9r-1f0-uq0">                           						                           <li><span>运行以下命令创建并编辑配置文件。</span>                              							                              <div>                                 								<pre><code>vim Testpage1.conf</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>按<kbd>i</kbd>进入编辑模式，输入以下内容。</span>                              							                              <div>在注释内容处，替换服务器域名参数信息与项目路径参数信息。                                  								<pre><code>server {
    listen       80;
    server_name  testpage1.com;    #此处使用测试域名。实际配置中使用您的服务器域名。

    #charset koi8-r;
    access_log  /var/log/nginx/b.access.log  main;

    location / {
        root   /usr/share/nginx/html/Testpage-1;    #测试站点路径。即您的项目代码路径。
        index  index.html index.htm;
    }

    #error_page  404              /404.html;

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}</code></pre>                                 编辑完成后，按<kbd>Esc</kbd>键，并输入<kbd>:wq</kbd>后按下回车键，保存并退出。                              </div>                              						                           </li>                           					                        </ol>                        				                     </li>                     <li><span>为测试站点<span>Testpage-2</span>创建并配置Nginx配置文件。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-ku2-gih-097">                           						                           <li><span>运行以下命令创建并编辑配置文件。</span>                              							                              <div>                                 								<pre><code>vim Testpage2.conf</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>按<kbd>i</kbd>进入编辑模式，输入以下内容。</span>                              							                              <div>在注释内容处，替换服务器域名参数信息与项目路径参数信息。                                  								
<pre><code>server {
    listen       80;
    server_name  testpage2.com;    #此处使用测试域名。实际配置中使用您的服务器域名。

    #charset koi8-r;
    access_log  /var/log/nginx/b.access.log  main;

    location / {
        root   /usr/share/nginx/html/Testpage-2;    #测试站点路径。即您的项目代码路径。
        index  index.html index.htm;
    }

    #error_page  404              /404.html;

    error_page   500 502 503 504  /50x.html;
    location = /50x.html {
        root   /usr/share/nginx/html;
    }
}
</code></pre>
	
	编辑完成后，按<kbd>Esc</kbd>键，并输入<kbd>:wq</kbd>后按下回车键，保存并退出。                              </div>                              						                           </li>                           					                        </ol>                        				                     </li>                     <li><span>运行以下命令重启Nginx服务。</span>                        					                        <div>                           						<pre><code>systemctl restart nginx</code></pre>                           					</div>                        				                     </li>                  </ol>                  		               </section>               		               <section class="section" id="section-6er-0gz-lur">                  <h1 font-weigh = "bold">（可选）本地配置hosts</h1>                  			                  			                  <p class="p" id="p-68q-7j4-2ht">由于本教程中全部使用的测试信息，因此需要在本地的hosts文件中配置IP映射。如果您在配置多个站点信息时使用的是真实的服务器域名，请忽略该步骤。教程中本地物理机使用Windows操作系统。</p>                  			                  <ol class="ol steps" id="steps-ixj-g0l-ye7">                     <li><span>访问<span>C:\Windows\System32\drivers\etc</span>目录。</span></li>                     <li><span>复制<span>hosts</span>文件进行备份。</span>                        					                        <div>保留<span>hosts - 副本</span>文件，在测试完成后使用该文件恢复<span>host</span>文件的初始状态。                        </div>                        				                     </li>                     <li><span>修改<span>hosts</span>文件。</span>                        					                        <div>在文件末尾追加以下内容。                            						<pre><code>&lt;QVM实例公网IP&gt; testpage1.com&lt;QVM实例公网IP&gt; testpage2.com</code></pre>                           保存文件并退出。</div>                        				                     </li>                     <li><span>返回Windows桌面，并按下<kbd>Win + R</kbd>组合键。</span></li>                     <li><span>在<span>运行</span>对话框中输入<kbd>cmd</kbd>，并单击<span>确定</span>。</span></li>                     <li><span>在命令行中运行以下命令，使<span>hosts</span>配置立即生效。</span>                        					                        <div>                           						<pre><code>ipconfig /flushdns</code></pre>                           					</div>                        				                     </li>                  </ol>                  		               </section>               		               <section class="section result" id="result-5of-ug7-ne9">                  <div>                     <h1 font-weigh = "bold">执行结果</h1>                  </div>在本地主机打开浏览器，成功访问到两个测试站点。                   			                  <ul class="ul" id="ul-9s9-o0q-0s2">                     				                     <li>访问<code>testpage1.com/</code>，查看<span>Testpage-1</span>站点内容如下所示。<img class="image break" id="image-auq-yc7-oof" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/mx8L719aosRE5bkM6Kjt.png" alt="testpage1"></li>                     				                     <li>访问<code>testpage2.com/</code>，查看<span>Testpage-2</span>站点内容如下所示。<img class="image break" id="image-jbn-6m9-0uy" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/KfdJpZuVQjDwR3M1sEYa.png" alt="testpage2"></li>                     			                  </ul>                  			                  <p class="p" id="p-ild-idm-vvw">至此多个Web站点已搭建成功。在实际搭建站点场景中，您只需要将配置文件中的域名与项目路径配置正确，即可实现多站点的访问。</p>                  		               </section>               	            </div>                     </article>      </main>   <script>$icmsDocProps={'productMethod':'created','language':'zh-CN',};</script></div>  </div>  	