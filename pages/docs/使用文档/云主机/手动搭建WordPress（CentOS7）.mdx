<div>      <main role="main">         <article role="article" aria-labelledby="title_tzu_kkz_11v">            	                        	            	            <div>               <p class="shortdesc">WordPress是使用PHP语言开发的博客平台，在支持PHP和MySQL数据库的服务器上，您可以用WordPress架设自己的网站，也可以用作内容管理系统（CMS）。本教程介绍如何在Linux操作系统的QVM实例上搭建WordPress网站。</p>               		               <div>                  <div>                     <h1 font-weigh = "bold">前提条件</h1>                  </div>                  			                  <ul class="ul" id="ul-edb-nm3-g7y">                     				                     <li>已注册七牛云账号。如还未注册，请先完成<span><a href="https://portal.qiniu.com/signup?ref=developer.qiniu.comregister.htm?" target="_blank">账号注册</a></span>。                     </li>                     				                     				                     				                     <li>已创建网络类型为专有网络的安全组，并且安全组的入方向添加规则并放行80端口，如果您使用SSH远程连接Linux实例，需要放行22端口。 若尚未添加规则，请先<span><a title="您可以通过添加安全组规则，允许或禁止安全组内的QVM实例对公网或私网的访问。" href="https://developer.qiniu.com/qvm/manual/7107/commonly-used-port-security-group#concept-sm5-2wz-xdb">添加安全组规则</a></span>。                     </li>                     				                     <li>已创建Linux操作系统的QVM实例，并且手动部署LNMP环境，详情请参见<span><a title="Nginx是一款小巧而高效的Web服务器软件，可帮您在Linux系统下快速方便地搭建出LNMP Web服务环境。本教程介绍如何手动在QVM实例上搭建LNMP环境，其中LNMP分别代表Linux、Nginx、MySQL和PHP。" href="https://developer.qiniu.com/qvm/manual/7073/manual-deployment-lnmp-environment-centos-7">手动部署LNMP环境（CentOS 7）</a></span>。本教程使用的相关资源版本如下。                        					                        <ul class="ul" id="ul-t6y-mmn-4a7">                           						                           <li>实例规格：ecs.c6.large</li>                           						                           <li>操作系统：公共镜像CentOS 7.2 64位</li>                           						                           <li>Nginx版本：1.16.1</li>                           						                           <li>MySQL版本：5.7.29</li>                           						                           <li>PHP版本：7.0.33</li>                           						                           <li>WordPress版本：5.1.6</li>                           					                        </ul>                        				                     </li>                     			                  </ul>                  			                  <div>                     <div><i class="icon-note note"></i></div>                     <div><strong>说明</strong> 当您使用不同软件版本时，可能需要根据实际情况调整命令和参数配置。                     </div>                  </div>                  		               </div>               		               <section class="section context" id="context-nq1-68o-w12">                  <div>                     <h1 font-weigh = "bold">背景信息</h1>                  </div>                  			                  <p class="p" id="p-akk-ycm-km9">本教程适用于熟悉Linux操作系统，刚开始使用七牛云进行WordPress网站搭建的企业或个人用户</span>。                     </div> <style type="text/css"> #myButton { background-color: #F15533; border-radius: 20px; border: 1px #F15533; display: inline-block; cursor: pointer; color: #ffffff; font-family: Arial; font-size: 15px; padding: 8px 31px; text-decoration: none; left: 0%; top: 0%; float: left; text-align: center; } #myButton:hover { background-color:#FF4500; } #myButton:active { position:relative; top:1px; } </style> <style> .aliware-hotspot-container .click { position: relative; width: 100%; height: 40px; max-width: 140px; } .aliware-hotspot-container { position: relative; width: 100%; max-width: 780px; padding-bottom: 20px; } .aliware-hotspot-container::before { padding-top: 1%; } </style>                     			<p></p>                  		               </section>               		               <section class="section" id="section-4cs-ieg-vj6">                  <h1 font-weigh = "bold">搭建WordPress网站</h1>                  			                  			                  <ol class="ol steps" id="steps-j50-e21-xkd">                     <li><span>通过QVM控制台，远程连接部署好LNMP环境的QVM实例，配置WordPress数据库。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-jzh-dt5-fzt">                           						                           <li><span>远程连接QVM实例。</span>                              							                                                 						                           </li>                           						                           <li><span>进入MySQL数据库。</span>                              							                              <div>使用<code>root</code>用户登录MySQL，并输入密码。密码为您在搭建环境时为数据库设置的密码。                                 								<pre><code>mysql -uroot -p</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>为WordPress网站创建数据库。</span>                              							                              <div>                                 								                                 <p class="p" id="p-9qh-p68-9c3">本教程中数据库名为wordpress。</p>                                 								<pre><code>create database wordpress;</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>创建一个新用户管理WordPress库，提高安全性。</span>                              							                              <div>                                 								                                 <p class="p" id="p-2fj-t7p-9ed">Mysql在5.7版本后默认安装了密码强度验证插件validate_password。您可以登录Mysql后查看密码强度规则。</p>                                 								<pre><code>show variables like "%password%";</code></pre>                                 								<p class="p" id="p-n1p-y65-w7n">本教程中创建新用户<code>user</code>，新用户密码为<code>PASSword123.</code>。                                 </p>                                 								<pre><code>create user 'user'@'localhost' identified by 'PASSword123.';</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>赋予用户对数据库wordpress的全部权限。</span>                              							                              <div>                                 								<pre><code>grant all privileges on wordpress.* to 'user'@'localhost' identified by 'PASSword123.';</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>使配置生效。</span>                              							                              <div>                                 								<pre><code>flush privileges;</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>退出MySQL。</span>                              							                              <div>                                 								<pre><code>exit;</code></pre>                                 							</div>                              						                           </li>                           					                        </ol>                        				                     </li>                     <li><span>下载WordPress，并移动至网站根目录。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-ty5-x9o-2mv">                           						                           <li><span>下载WordPress。</span>                              							                              <div>通过<span>yum</span>命令下载的WordPress保存在<span>/usr/share/wordpress</span>目录下。                                 								<pre><code>yum -y install wordpress</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>将下载的WordPress移动至网站根目录。</span>                              							                              <div>                                 								<pre><code>mv /usr/share/wordpress /usr/share/nginx/html/wordpress</code></pre>                                 							</div>                              						                           </li>                           					                        </ol>                        				                     </li>                     <li><span>修改WordPress配置文件。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-0g3-xf6-h6r">                           						                           <li><span>进入移动后的WordPress路径下，软连接配置文件<span>wp-config.php</span>。</span>                              							                              <div>                                 								<pre><code>cd /usr/share/nginx/html/wordpress
ln -snf /etc/wordpress/wp-config.php wp-config.php</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>编辑<code>wp-config.php</code>文件。</span>                              							                              <div>                                 								<pre><code>vim wp-config.php</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>按<kbd>i</kbd>键切换至编辑模式，根据配置完成的wordpress数据库信息，修改MySQL相关配置信息，修改代码如下所示。</span>                              							                              <div>WordPress网站的数据信息将通过数据库的<code>user</code>用户保存在wordpress库中。                                 								<pre><code>// ** MySQL 设置 - 具体信息来自您正在使用的主机 ** //
/** WordPress数据库的名称 */
define('DB_NAME', 'wordpress');

/** MySQL数据库用户名 */
define('DB_USER', 'user');

/** MySQL数据库密码 */
define('DB_PASSWORD', 'PASSword123.');

/** MySQL主机 */
define('DB_HOST', 'localhost');
</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>修改完成后，按下<kbd>Esc</kbd>键后，输入<code>:wq</code>并回车以保存并关闭配置文件。</span></li>                           					                        </ol>                        				                     </li>                     <li><span>修改Nginx配置文件。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-5fc-c13-ymh">                           						                           <li><span>运行以下命令打开Nginx配置文件。</span>                              							                              <div>                                 								<pre><code>vim /etc/nginx/nginx.conf</code></pre>                                 							</div>                              						                           </li>                           						                           <li><span>按<kbd>i</kbd>键进入编辑模式。</span>                              							                              <div>在<code>server</code>大括号内，将<code>root</code>后的内容替换为wordpress根目录。本示例中根目录为<span>/usr/share/nginx/html/wordpress</span>。
<img  class="image break" id="image-zko-psk-qgz" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-17/6Et1v9LTJ2b8U3RnVW7m.png" alt="nginx配置文件">
在<code>location ~ .php$</code>大括号内，将<code>root</code>后的内容替换为wordpress根目录。
<img  class="image break" id="image-pbo-ud0-11x" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-17/9zVi015NTqlg2YSOAhWX.png" alt="nginx配置文件">
修改完成后按<kbd>Esc</kbd>键，输入<code>:wq</code>保存并退出配置文件。                              </div>                              						                           </li>                           						                           <li><span>运行以下命令重启Nginx服务。</span>                              							                              <div>                                 								<pre><code>systemctl restart nginx</code></pre>                                 							</div>                              						                           </li>                           					                        </ol>                        				                     </li>                     <li><span>安装并登录WordPress网站。</span>                        					                        <ol type="a" class="ol substeps" id="substeps-34m-o44-z5c">                           						                           <li><span>在本地物理机上使用浏览器访问<code>QVM实例公网IP</code>，进入WordPress安装页面。</span></li>                           						                           <li><span>填写网站基本信息，然后单击<span>安装WordPress</span>。</span>                              							                              <div>填写信息参数说明：                                 								                                 <ul class="ul" id="ul-atu-xuf-jpk">                                    									                                    <li>站点标题：WordPress网站的名称。例如：demowp。</li>                                    									                                    <li>用户名：用户登录WordPress时使用的用户名，请注意安全性。例如：testwp。</li>                                    									                                    <li>密码：建议用户设置安全性高的密码。例如：Wp.123456。</li>                                    									                                    <li>您的电子邮件：用于接收通知的电子邮件。例如：1234567890@aliyun.com。</li>                                    								                                 </ul>                                 							                              </div>                              						                           </li>                           						                           <li><span>单击<span>登录</span>。</span></li>                           						                           <li><span>输入在安装WordPress时设置的用户名<code>testwp</code>和密码<code>Wp.123456</code>，然后单击<span>登录</span>。</span>                              							                              <div>成功进入您个人的WordPress网站。</div>                              						                           </li>                           					                        </ol>                        				                     </li>                  </ol>                  		               </section>               		               <section class="section" id="section-0hy-iyd-ohn">                  <h1 font-weigh = "bold">解析WordPress网站域名</h1>                  			                  			                  <p class="p" id="p-nio-1n2-m9r">通过实例公网IP地址直接访问您的WordPress网站会降低服务端的安全性。如果您已有域名或者想为WordPress网站注册一个域名，可以参考以下步骤。本示例注册域名为<code>www.WordPress.EcsQuickStart.com</code>。                  </p>                  			                  <ol class="ol steps" id="steps-sfs-l9x-dmx">                     <li><span>注册域名。</span>                        					                                             </li>                     <li><span>备案。</span>                        					                        <div>如果您的域名指向的网站托管在七牛云中国内地节点服务器，您需要进行备案。<span>如果您是首次备案，请参见<span><a  href="https://developer.qiniu.com/qvm/manual/4184/qvm-first-guide">首次备案流程</a></span>，其他情况请参见<span><a title="网站托管在的服务器上，您需根据所在省市的管局规则进行备案申请。当您使用七牛云节点服务器时，您可以在PC端或移动端的七牛云ICP代备案系统中提交ICP备案申请，审核通过便可开通网站访问服务。本文为您介绍在七牛云备案系统提交ICP备案的流程及注意事项。" href="https://developer.qiniu.com/qvm/manual/4294/record-introduction">ICP备案流程概述</a></span>。</span>                           						                           					                        </div>                        				                     </li>                     <li><span>解析域名。将域名指向实例公网IP。</span>                        					                        <div>                           						                           <p class="p" cond-props="china" id="p-xxk-455-55j">域名解析是使用域名访问您的网站的必备环节</span>。                           </p>                           						                           						                           					                        </div>                        				                     </li>                     <li><span>返回QVM控制台，远程连接已搭建WordPress网站的QVM实例，登录MySQL数据库。</span>                        					                        <div>                           						<pre><code>mysql -uroot -p</code></pre>                           					</div>                        				                     </li>                     <li><span>使用wordpress数据库。</span>                        					                        <div>                           						<pre><code>use wordpress;</code></pre>                           					</div>                        				                     </li>                     <li><span>将实例公网IP替换为新域名。</span>                        					                        <div>                           						<pre><code>update wp_options set option_value = replace(option_value, 'http://实例公网IP', 'http://www.WordPress.EcsQuickStart.com') where option_name = 'home' OR option_name = 'siteurl';</code></pre>                           					</div>                        				                     </li>                     <li><span>退出MySQL。</span>                        					                        <div>                           						<pre><code>exit;</code></pre>                           						<p class="p" id="p-zqu-wvg-6vk">成功为WordPress网站设置新域名。</p>                           					                        </div>                        				                     </li>                  </ol>                  		               </section>               		               <section class="section" id="section-6jh-3sn-g99">                  <h1 font-weigh = "bold">常见问题</h1>                  			                  			                  <p class="p" id="p-rzs-e27-s7j">问题描述：WordPress中设置固定链接后，跳转页面无法访问。</p>                  			                  <div>解决方案：网站设置伪静态有利于搜索引擎收录网站。您在对WordPress站点设置固定链接前，需要先在Nginx服务器中设置伪静态规则。操作步骤如下：                     				                     <ol class="ol" id="ol-dti-fzu-uzt">                        					                        <li>登录搭建WordPress的QVM实例。</li>                        					                        <li>运行以下命令打开Nginx配置文件。                           						<pre><code>vim /etc/nginx/nginx.conf</code></pre>                           					</li>                        					                        <li>按<kbd>i</kbd>键进入编辑模式，在<code>location /</code>大括号内，添加如下代码。                           						<pre><code>if (-f $request_filename/index.html){
rewrite (.*) $1/index.html break;
}
if (-f $request_filename/index.php){
rewrite (.*) $1/index.php;
}
if (!-f $request_filename){
rewrite (.*) /index.php;
}</code></pre>                           添加完成后按<kbd>Esc</kbd>键，并输入<code>:wq</code>后回车，保存退出文件。                        </li>                        					                        <li>运行以下命令重启Nginx服务。                           						<pre><code>systemctl restart nginx</code></pre>                           					</li>                        				                     </ol>                     			                  </div>                  		               </section>               	            </div>                     </article>      </main>   </div>  </div>  	