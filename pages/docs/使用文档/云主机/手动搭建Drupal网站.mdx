<div> <main role="main"> <article role="article" aria-labelledby="title_bok_l37_vpl"> <div> <p class="shortdesc">本文介绍如何在CentOS 7操作系统的QVM实例上搭建Drupal电子商务网站。</p> <div> <div> <h1 font-weigh = "bold">前提条件</h1> </div> <ul class="ul" id="ul-fat-b22-0mt"> <li>已注册七牛云账号。如还未注册，请先完成<span><a href="https://portal.qiniu.com/signup?ref=developer.qiniu.comregister.htm?" target="_blank">账号注册</a></span>。 </li> <li>已创建了分配公网IP的QVM实例，并部署了LAMP环境，具体操作请参见<span><a title="本教程介绍如何使用云服务器QVM实例搭建LAMP平台，其中LAMP分别代表Linux、Apache、MySQL和PHP。" href="https://developer.qiniu.io/qvm/manual/7074/manual-deployment-lamp-environment-centos-7">部署LAMP环境</a></span>。 </li> </ul> </div> <section class="section context" id="context-s2s-ft9-1os"> <div> <h1 font-weigh = "bold">背景信息</h1> </div> <p class="p" id="p-bpp-fus-9un">Drupal是使用PHP语言编写的开源内容管理框架（CMF），它由内容管理系统（CMS）和PHP开发框架（Framework）共同构成。它用于构造提供多种功能和服务的动态网站，能支持从个人博客到大型社区等各种不同应用的网站项目。</p> <p class="p" id="p-gyf-ye7-7yk">本教程适用于熟悉Linux系统，刚开始使用七牛云进行建站的用户。</p> </section> <section class="section" id="section-c91-zcu-lk8"> <h1 font-weigh = "bold">配置信息</h1> <div>本教程示例步骤中使用的实例配置与软件版本如下。实际操作时，请以您的配置信息为准。 <ul class="ul" id="ul-0q7-jxd-c3r"> <li>实例规格：ecs.c6.large</li> <li>操作系统：CentOS 7.8 64位</li> <li>Apache：2.4.6</li> <li>MySQL：5.7.31</li> <li>PHP：7.0.33</li> <li>Drupal：8.1.1</li> </ul> </div> </section> <section class="section" id="section-bzo-jc4-j3f"> <h1 font-weigh = "bold">配置数据库信息</h1> <ol class="ol steps" id="steps-rdw-5oz-k6o"> <li><span>通过本地浏览器访问<kbd>http://实例公网IP/phpMyAdmin</kbd>。</span></li> <li><span>使用MySQL的用户名和密码，登录phpMyAdmin。</span></li> <li><span>在页面顶部单击<span>SQL</span>。</span></li> <li><span>为Drupal创建数据库和用户。</span><div>在编辑框中输入以下SQL语句：<pre><code>CREATE DATABASE &lt;DrupalDBName&gt;
CREATE user '&lt;UserName&gt;'@'&lt;IP&gt;' IDENTIFIED BY '&lt;UserPassWord&gt;'
FLUSH PRIVILEGES;</code></pre>根据您的需求设置SQL语句中的参数： <ul class="ul" id="ul-x7t-hjy-c4w"> <li><code>&lt;DrupalDBName&gt;</code>：数据库名称 </li> <li><code>&lt;UserName&gt;</code>：数据库用户 </li> <li><code>&lt;IP&gt;</code>：本机可直接使用localhost或者127.0.0.1 </li> <li><code>&lt;UserPassWord&gt;</code>：数据库密码 <div> <div><i class="icon-note note"></i></div> <div><strong>说明</strong> 数据库的密码强度规则可以通过SQL语句<code>show variables like 'validate_password%'; </code>查询。 </div> </div> </li> </ul> </div> </li> <li><span>单击<span>执行</span>。</span></li> </ol> </section> <section class="section" id="section-h15-vy6-k4e"> <h1 font-weigh = "bold">安装Drupal</h1> <ol class="ol steps" id="steps-p0g-dvi-wvs"> <li><span>远程连已经部署了LAMP环境的QVM实例。</span><div> </div> </li> <li><span>下载并配置Drupal。</span><ol type="a" class="ol substeps" id="substeps-fqt-qdh-lq6"> <li><span>下载Drupal安装包。</span><div><pre><code>cd
wget http://ftp.drupal.org/files/projects/drupal-8.1.1.zip</code></pre></div> </li> <li><span>解压Drupal安装包，并将安装文件移动到Apache的网站根目录。</span><div><pre><code>yum install unzip -y
unzip drupal-8.1.1.zip </code></pre><pre><code>mv drupal-8.1.1/* /var/www/html</code></pre></div> </li> <li><span>下载中文翻译包。</span><div><pre><code>cd /var/www/html</code></pre><pre><code>wget -P profiles/standard/translations http://ftp.drupal.org/files/translations/8.x/drupal/drupal-8.26.zh-hans.po</code></pre></div> </li> <li><span>修改<span>sites</span>目录属主属组。</span><div><pre><code>chown -R daemon:daemon /var/www/html/sites</code></pre></div> </li> <li><span>重启Apache服务。</span><div><pre><code>systemctl restart httpd</code></pre></div> </li> </ol> </li> <li><span>通过浏览器访问网站并安装Drupal。</span><ol type="a" class="ol substeps" id="substeps-slw-x0i-gi9"> <li><span>通过本地浏览器访问<kbd>&lt;QVM实例公网IP地址&gt;</kbd> ，进入到Drupal安装界面。选择安装语言，单击<span>Save and continue</span>。</span><div><img class="image break" id="image-krh-k95-f5b" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/uycDLX48ESKeIJwTstpW.png" width="420" alt="选择安装语言"></div> </li> <li><span>选择标准安装方式，单击<span>保存并继续</span>。</span><div><img class="image break" id="image-bzx-kgz-2eu" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/bUP4HRkh1oTlrxByJQsa.png" width="420" alt="选择安装方式"></div> </li> <li><span>填写已配置完成的数据库信息，单击<span>保存并继续</span>。</span><div><img class="image break" id="image-0yu-wdb-08a" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/Xa8WjAp90c6g3VoJONfK.png" width="420" alt="设置数据库"></div> </li> <li><span>自动安装完成后进入网站设置界面，填写站点信息，单击<span>保存并继续</span>。</span><div><img class="image break" id="image-413-jrg-gae" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/EMBhUxv0KsG5JLjnwSY8.png" width="420" alt="设置站点信息"></div> </li> </ol> </li> </ol> </section> <section class="section postreq" id="postreq-o3x-elj-r84"> <div> <h1 font-weigh = "bold">后续步骤</h1> </div>安装完成，后续可以根据您的需求对网站进行个性化设置。
	<img class="image break" cond-props="china" id="image-rvp-690-i11" src="http://qey2kbifv.hn-bkt.clouddn.com/2020-09-04/hBgrsI9jQmbZTfFloEuY.png" width="420" alt="后续操作"></section> </div> </article> </main> </div> </div>