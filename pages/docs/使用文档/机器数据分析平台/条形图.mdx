柱形图使用垂直或水平的柱子显示类别之间的数值比较。其中一个轴表示需要对比的分类维度，另一个轴代表相应的数值。
横向柱形图的柱子方向水平，简称条形图。因为条形图的文本可以横向排布，便于用户的阅读，建议当分类过多的时候使用条形图。
根据使用场景的不同，条形图还可以细分为簇状条形图、堆积条形图、百分比条形图。

|图表名称|说明|使用场景|
|-|-|-|
|簇状条形图|基础的条形图，呈现数据的分类情况。分组后每种颜色的柱子呈现每个分组的结果|呈现对比数据|
|堆积条形图|基础条形图的扩展形式，将每根柱子进行分割，以显示大类目下的细分类目占比情况，可以展示更多维度的数据：大类目之间的数值比较、大类目下各细分类目的占比情况、不同大类目下同一细分类目的横向数值比较。是一种既可以直观地看出每个指标的值，还能够反映出维度总和的图表|展示多维数据，呈现分类以及每个分类下的详细类别情况|
|百分比条形图|柱子的各个层代表的是该类别数据占该分组总体数据的百分比，每个系列按照所占的百分比进行堆积，这样就能直观的看出每个系列所占的比重。|展示多维数据，强度每个分类下的详细类别占比情况|

### **样式配置说明**
簇状条形图、堆积条形图、百分比条形图三种条形图的配置项一致，由X轴、Y轴、分组、对比基线、图例、图表样式、颜色7部分组成

#### **X轴**
X轴用于配置图表的X轴相关信息

|配置项|说明|
|-|-|
|字段|X轴的字段，只能选择单个字段|
|坐标轴名称|坐标轴名称是否显示设置，默认显示X轴字段，可手动修改|
|X轴类型|默认根据选择的X轴字段进行自动识别，可修改。对于X轴为线性、对数、时间类型的可以设置其轴的最小值和最大值|
|轴标签显示|标签的显示方式，当标签过多时最好选择自适应|
|标签旋转|标签的旋转方式，可以帮助您更美观地展示标签|


#### **Y轴**
Y轴用于配置图表的Y轴相关信息

|配置项|说明|
|-|-|
|字段|X轴的字段，只能选择单个字段|
|字段|X轴的字段，只能选择单个字段|
|坐标轴名称|坐标轴名称是否显示设置，默认显示Y轴字段，可手动修改|
|Y轴类型|默认为线性，对于Y值变化范围差异很大的数据可以选择对数|
|最小值|不填写则自动，表示Y轴的最小值|
|最大值|不填写则自动，表示Y轴的最大值|
|刻度间隔|表示Y轴刻度间隔的方式，可以设置等分的分数或者固定间隔|
|数值精度|Y轴的数值单位|
|数值单位|Y轴的数值精度|

#### **分组**
分组用于将数据进行分组，支持多个分组字段。会根据配置字段的取值生成不同颜色的柱形

#### **对比基线**
对比基线可设置一条基线，通过此基线可以清晰呈现数据与基线的差距。可以设置多个对比基线，一个基线可以设置其基线名称、颜色、基线类型、基线的值

#### **图例**
图例用于配置图表图图例相关信息

|配置项|说明|
|-|-|
|图例位置|图例展示的位置，图例包括了图表的图例和基线的图例|
|图表图例|可以设置其显示和隐藏，显示时可以显示数据的当前值、平均值、最小值、最大值、总和、中位数和众数|
|基线图例|可以设置其显示和隐藏|

#### **图表样式**
图表样式用于配置图表相关样式信息

|配置项|说明|
|-|-|
|值标签显示|表示是否需要在柱子上面显示具体的标签值，可以选在在柱子的中间或者顶部显示标签值|


#### **颜色**
颜色用于设置柱形的颜色，支持选择颜色模板，即选择系统定义好的不同风格的配色方案，也支持修改单个柱形的颜色。对于某些需要强调颜色的分组，可以自定义颜色，如error用红色表示



### **示例**

#### **簇状条形图**
1、查询最近7天不同操作次数，对比系统到底什么操作是最高频，什么使用低频
```
repo="_internal"
| stats count() by action.name
| sort by count
| rename count as "操作次数",action.name as "操作类型"
```
- X轴选择操作类型，Y轴选择操作次数,绘制簇状条形图
![image.png](https://dn-odum9helk.qbox.me/FhwLzKJOC7TvWbjHFFCkV4fePcat)

2、查询最近7天不同操作次数，对比系统到底什么操作是最高频，什么使用低频。同时区分不同操作类型登录成功与失败的情况
```
repo="_internal"
| where action.name="login"
| eval response.statusName=if(response.statusName="OK","登录成功","登录失败")
| bin _time span=1d
| stats count() as cnt by _time,response.statusName
| sort by _time asc
| eval timetmp=toReadableTime(_time, "MM-dd")
```
- X轴选择操作类型，Y轴选择操作次数,分组选择操作结果，绘制簇状条形图
- 添加图例，展示登录成功/失败的最大值和总数
![image.png](https://dn-odum9helk.qbox.me/FkYiCzBlcw-Ac8uz8cXP3H-H7Iqs)
- 我们可以看到搜索操作很多，图形呈现其他操作不明显，同时呈现不太出来登录成功与失败的占比，此时我们可以通过SPL筛选掉操作为搜索的结果，
- 在图表样式中设置值标签显示为顶部，能更加清晰呈现为每个操作类型下成功与失败的次数
- 修改登录失败的柱形颜色为橙色，能够更加明显呈现登录失败情况
![image.png](https://dn-odum9helk.qbox.me/FkTqIdfemsyG9oTIAavdgpChEjhT)


#### **堆积条形图**

查询最近7天不同操作次数，对比系统到底什么操作是最高频，什么使用低频。区分不同操作类型登录成功与失败的情况，也呈现操作总数

```
repo="_internal"
| eval response.statusName=if(response.statusName="OK","操作成功","操作失败")
| stats count() by action.name,response.statusName
| sort by count
| where action.name!="search"
| rename count as "操作次数",action.name as "操作类型",response.statusName as "操作结果"
```
- X轴选择操作类型，Y轴选择操作次数,分组选择操作结果，绘制堆积条形图
- 添加图例，展示登录成功/失败的最大值和总数
- 在图表样式中设置值标签显示为顶部，能更加清晰呈现为每个操作类型下成功与失败的次数
- 修改登录失败的柱形颜色为橙色，能够更加明显呈现登录失败情况
![image.png](https://dn-odum9helk.qbox.me/FovwTdFHpPkBxSs17zo7k5szH_xY)

#### **百分比条形图**

查询最近7天不同操作类型的成功与失败占比情况

```
repo="_internal"
| eval response.statusName=if(response.statusName="OK","操作成功","操作失败")
| stats count() by action.name,response.statusName
| sort by count
| rename count as "操作次数",action.name as "操作类型",response.statusName as "操作结果"
```
- X轴选择操作类型，Y轴选择操作次数,分组选择操作结果，绘制百分比条形图
- 添加操作成功占比95%的对比基线，能够直观看到哪些操作类型的登录成功占比小于95%
- 修改登录失败的柱形颜色为橙色，能够更加明显呈现登录失败情况
![image.png](https://dn-odum9helk.qbox.me/Fk7IcbS33y5zhlMHvDn1RwycZnNC)