状态矩阵图通过紧密排布的小面板展示用户关心指标的状态，并通过面板的颜色标记每个指标的严重性。例如通过状态矩阵图来监控服务器指标，通过面板颜色即可得知服务器的健康情况并快速定位到异常指标。

### **样式配置说明**

状态矩阵的配置项由数据、面板状态设置、状态显示规则、图表样式4部分组成

#### **数据**
数据用于选择状态矩阵需要展示的字段相关信息

|配置项|说明|
|-|-|
|统计指标|展示的字段，可以设置其单位和精度，可以添加多个展示字段|
|分组字段|进行分组的字段，可以设置多个，设置后单个指标会根据此字段进行分组，每一个面板展示一个分组结果|

#### **面板状态设置**
面板状态设置用于定义状态，通过不同的颜色来代表不同的状态，可拖拽对状态的严重程度排序，从上到下依次递减

|配置项|说明|
|-|-|
|状态设置|通过输入名称+颜色来设置状态，如正常：绿色，异常：红色|

#### **状态显示规则**
状态显示规则用于设置每个面板的状态，可以设置多个显示规则。面板的最终状态为里面所有展示字段的最严重的状态。

|配置项|说明|
|-|-|
|状态字段|用于设置状态的字段，可以与统计指标不同|
|字段类型|颜色字段的类型，默认会根据选择的状态字段进行自动识别，可以修改|
|状态|具体的状态设置。数值型字段支持根据阈值段进行状态设置。</P>非数值型可设置字段值逻辑匹配后的状态|



#### **图表样式**
图表的样式配置

|配置项|说明|
|-|-|
|颜色模式|颜色展示的区域，可以是面板的背景，或者面板标题|
|面板宽度|每个面板的宽度|
|面板高度|每个面板的高度|
|字体大小|标题的字体大小|
|内容|面板除标题外内容的字体大小和颜色|
|面板分页|若面板过多，可以开启面板分页，可设置每页的展示个数。同时可以设置面板的轮播，即可以按照固定时间进行轮播。这对于循环展示多个面板的状态十分友好|
|面板排序|按面板整体严重程度对面板自动排列，通过此设置可以将更严重的面板展示在前面|
|指标排序|按指标严重程度对面板内指标自动排列，当存在多个统计指标的时候有效，更严重的指标会排列在面板的更上方|


### **场景示例**
展示过去7天的不同操作的失败情况，如果未出现失败的情况，则表示“正常”。失败2次表示“警告”，超过2次则“严重”

```
repo="_internal" AND response.statusName !="OK"
|stats count() as "失败次数" by action.name
```
1. 通过面板状态设置正常、警告、严重三种状态
2. 根据状态显示规则设置不同失败次数下的不同状态
3. 开启面板排序：将更为严重的情况展示在前面，用户能更清晰看到严重程度
![image.png](https://dn-odum9helk.qbox.me/Fp16w5p5QxMpqOnPlj_rJmadsMBB)



