面积图又叫区域图。 它是在折线图的基础之上形成的, 它将折线图中折线与自变量坐标轴之间的区域使用颜色填充，这样一个填充区域我们叫做面积，颜色的填充可以更好的突出趋势信息。
和折线图一样，面积图也用于强调数量随时间而变化的程度，也可用于引起人们对总值趋势的注意。他们最常用于表现趋势和关系,而不是传达特定的值。
折线图和面积图都可以表示一段时间（或者有序分类）的趋势，相比之下面积图的表现力更强一些。

根据使用场景的不同。还可以细分为面积图、堆积面积图、百分比折面积图。

|图表名称|说明|使用场景|
|-|-|-|
|面积图|普通的面积图，呈现数据随类别的变化，所有的数据都从相同的零轴开始。分组后每个区域呈现每个分组结果的趋势|呈现变化趋势|
|堆积面积图|每一个数据集的起点不同，都是基于前一个数据集。显示多组数值的趋势以及总数，除了呈现每组数据的变化趋势，更需要呈现总数。堆叠起来的区域图在表现大数据的总量分量的变化情况时格外有用|呈现趋势以及总量|
|百分比面积图|显示多组数据占总数比例的趋势，可强调每个系列的比例趋势线|强调每个系列的比例趋势线|

### **样式配置说明**
面积图、堆积面积图、百分比面积图三种面积图的配置项一致，由X轴、Y轴、分组、对比基线、图例、图表样式、颜色7部分组成。

#### **X轴**
X轴用于配置面积图的X轴相关信息

|配置项|说明|
|-|-|
|字段|X轴的字段，只能选择单个字段|
|坐标轴名称|坐标轴名称是否显示设置，默认显示X轴字段，可手动修改|
|X轴类型|默认根据选择的X轴字段进行自动识别，可修改。对于X轴为线性、对数、时间类型的可以设置其轴的最小值和最大值|
|轴标签显示|标签的显示方式，当标签过多时最好选择自适应|
|标签旋转|标签的旋转方式，可以帮助您更美观地展示标签|


#### **Y轴**
Y轴用于配置面积图的Y轴相关信息

|配置项|说明|
|-|-|
|字段|X轴的字段，只能选择单个字段|
|坐标轴名称|坐标轴名称是否显示设置，默认显示Y轴字段，可手动修改|
|Y轴类型|默认为线性，对于Y值变化范围差异很大的数据可以选择对数|
|最小值|不填写则自动，表示Y轴的最小值|
|最大值|不填写则自动，表示Y轴的最大值|
|刻度间隔|表示Y轴刻度间隔的方式，可以设置等分的分数或者固定间隔|
|数值精度|Y轴的数值单位|
|数值单位|Y轴的数值精度|
|空值模式|表示存在X，不存在Y的时候，绘图的模式，可以直接展示空值。或者此时Y轴用0代替后链接，还可以直接跳过空值连接存在值的数据点|

#### **分组**
分组用于将数据进行分组，支持多个分组字段。会根据配置字段的取值生成不同颜色的曲线

#### **对比基线**
对比基线可设置一条基线，通过此基线可以清晰呈现数据与基线的差距。可以设置多个对比基线，一个基线可以设置其基线名称、颜色、基线类型、基线的值

#### **图例**
图例用于配置面积图图例相关信息

|配置项|说明|
|-|-|
|图例位置|图例展示的位置，图例包括了图表的图例和基线的图例|
|图表图例|可以设置其显示和隐藏，显示时可以显示数据的当前值、平均值、最小值、最大值、总和|
|基线图例|可以设置其显示和隐藏|

#### **图表样式**
图表样式用于配置面积图相关样式信息

|配置项|说明|
|-|-|
|线条|可以设置线条是否平滑|
|拐点|对于特别强调变化趋势的变化点，可以设置拐点，同时也显示每个点具体的值|

#### **颜色**
颜色用于设置面积的颜色，支持选择颜色模板，即选择系统定义好的不同风格的配色方案，也支持修改单个面积的颜色。对于某些需要强调颜色的分组，可以自定义颜色，如error用红色表示



### **示例**

#### **面积图**

1、查询最近30天的登录趋势图
``` 
repo="_internal"
| where action.name="login"
| bin _time span=1d
| stats count() as 登录总数 by _time
| sort by _time asc
| eval timetmp=toReadableTime(_time, "MM-dd")
```
- X轴选择timetmp，Y轴选择登录总数,绘制面积图
- Y轴的空值用0进行连接，表示此时没有登录情况
![image.png](https://dn-odum9helk.qbox.me/Fg8fwEAxRKCaJZ9MXQrYkpeAC9g3)

2、查询最近30天的登录趋势图，分别呈现出登录成功、失败的趋势。

```
repo="_internal"
| where action.name="login"
| eval response.statusName=if(response.statusName="OK","登录成功","登录失败")
| bin _time span=1d
| stats count() as cnt by _time,response.statusName
| sort by _time asc
| eval timetmp=toReadableTime(_time, "MM-dd")
```
-  X轴选择 timetmp，Y轴选择cnt，选择response.statusName作为分组字段分别呈现登录成功和失败的趋势图。（一般来说，系统会自动识别 X 轴和 Y 轴字段，您也可以自行配置。）
- Y轴的空值用0进行连接，表示此时没有登录失败/成功的情况
- 添加图例，展示登录成功/失败的最大值和总数
![image.png](https://dn-odum9helk.qbox.me/FkIsFtLqvjSl1FFgNWu3g3i5k73B)
- 设置对于登录失败预警的基线为2，能够更加清晰地看出哪些登录失败超过2次的情况
- 修改登录失败趋势的面积颜色为橙色，能够更加明显呈现登录失败情况
![image.png](https://dn-odum9helk.qbox.me/FtJzVxe42tSYpJ1QNXDmimeYRjyo)

#### **堆积面积图**

查询最近30天的登录趋势图，分别呈现出登录成功、失败的趋势，同时能够呈现登录的总的次数。

```
repo="_internal"
| where action.name="login"
| eval response.statusName=if(response.statusName="OK","登录成功","登录失败")
| bin _time span=1d
| stats count() as cnt by _time,response.statusName
| sort by _time asc
| eval timetmp=toReadableTime(_time, "MM-dd")
```
-  X轴选择timetmp，Y轴选择cnt，选择response.statusName作为分组字段分别呈现登录成功和失败的趋势图。（一般来说，系统会自动识别 X 轴和 Y 轴字段，您也可以自行配置。）
- Y轴的空值用0进行连接，表示此时没有登录失败/成功的情况
- 添加图例，展示登录成功/失败的最新值和总数
- 添加拐点为4px的圆，同时呈现值标签。更能清新呈现出每次登录成功和失败的次数
- 修改登录失败趋势的面积颜色为橙色，能够更加明显呈现登录失败情况
![image.png](https://dn-odum9helk.qbox.me/FkCEMtU-ziqK3uYQDSARIYV8MCTp)

#### **百分比面积图**

查询最近30天的登录趋势图，分别呈现出登录成功、失败的趋势，同时能够呈现登录的总的次数。

```
repo="_internal"
| where action.name="login"
| eval response.statusName=if(response.statusName="OK","登录成功","登录失败")
| bin _time span=1d
| stats count() as cnt by _time,response.statusName
| sort by _time asc
| eval timetmp=toReadableTime(_time, "MM-dd")
```
-  X轴选择timetmp，Y轴选择cnt，选择response.statusName作为分组字段分别呈现登录成功和失败的趋势图。（一般来说，系统会自动识别 X 轴和 Y 轴字段，您也可以自行配置。）
- Y轴的空值用0进行连接，表示此时没有登录失败/成功的情况
- 修改登录失败趋势的面积颜色为橙色，能够更加明显呈现登录失败情况
![image.png](https://dn-odum9helk.qbox.me/FsMdfVe878jFlc09XBMdAa7Z_Yt2)