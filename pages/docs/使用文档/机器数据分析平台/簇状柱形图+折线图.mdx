簇状柱形图+折线图组合图由簇状柱形图+折线图组合组成，通过在一个图表内使用柱形图和折线图的组合，绘出多个数据序列，对于突出显示各种数据序列之间的关系非常有用。两个图形合用一个Y轴。分组只针对簇状柱形图进行分组。
簇状柱形图+折线图组合图适用于既需要组合图表示序列的分类有需要表示趋势的场景，且两者的数据大小类似

### **样式配置说明**
簇状柱形图+折线图组合图的配置项由X轴、Y轴、分组、对比基线、图例、图表样式、颜色7部分组成

#### **X轴**
X轴用于配置图形的X轴相关信息

|配置项|说明|
|-|-|
|字段|X轴的字段，只能选择单个字段|
|坐标轴名称|坐标轴名称是否显示设置，默认显示X轴字段，可手动修改|
|X轴类型|默认根据选择的X轴字段进行自动识别，可修改。对于X轴为线性、对数、时间类型的可以设置其轴的最小值和最大值|
|轴标签显示|标签的显示方式，当标签过多时最好选择自适应|
|标签旋转|标签的旋转方式，可以帮助您更美观地展示标签|


#### **Y轴**
Y轴用于配置图形的Y轴相关信息

|配置项|说明|
|-|-|
|柱形字段|柱形图字段，只能选择单个字段|
|折线字段|折线图字段，只能选择单个字段|
|坐标轴名称|坐标轴名称是否显示设置，默认显示Y轴字段，可手动修改|
|Y轴类型|默认为线性，对于Y值变化范围差异很大的数据可以选择对数|
|最小值|不填写则自动，表示Y轴的最小值|
|最大值|不填写则自动，表示Y轴的最大值|
|刻度间隔|表示Y轴刻度间隔的方式，可以设置等分的分数或者固定间隔|
|数值精度|Y轴的数值单位|
|数值单位|Y轴的数值精度|
|空值模式|表示存在X，不存在Y的时候，绘图的模式，可以直接展示空值。或者此时Y轴用0代替后连接，还可以直接跳过空值连接存在值的数据点|

#### **分组**
分组用于将数据进行分组，支持多个分组字段。会根据配置字段的取值生成不同颜色的柱形。注意：分组只针对柱形图进行分组

#### **对比基线**
对比基线可设置一条基线，通过此基线可以清晰呈现数据与基线的差距。可以设置多个对比基线，一个基线可以设置其基线名称、颜色、基线类型、基线的值

#### **图例**
图例用于配置图表图例相关信息

|配置项|说明|
|-|-|
|图例位置|图例展示的位置，图例包括了图表的图例和基线的图例|
|图表图例|可以设置其显示和隐藏，显示时可以显示数据的当前值、平均值、最小值、最大值、总和、中位数和众数|
|基线图例|可以设置其显示和隐藏|

#### **图表样式**
图表样式用于配置图表相关样式信息，支持配置柱形图和折线的样式

|配置项|说明|
|-|-|
|值标签显示|表示是否需要在柱子上面显示具体的标签值，可以选在在柱子的中间或者顶部显示标签值|
|线条|可以设置折线的线条是否平滑|
|拐点|对于特别强调变化趋势的变化点，可以设置拐点，同时也显示每个点具体的值|

#### **颜色**
颜色用于设置图表的的颜色，支持选择颜色模板，即选择系统定义好的不同风格的配色方案，也支持修改单个柱形/折线的颜色。对于某些需要强调颜色的分组，可以自定义颜色，如error用红色表示



### **示例**

1、查询最近7天除搜索外操作的所有操作类型的操作次数，对比系统到底什么操作是最高频，什么使用低频。同时，呈现每个操作的错误次数趋势
```
repo="_internal"
| eval response.statusName=if(response.statusName="OK",0,1)
| stats count() as count,sum(response.statusName) as error by action.name
| sort by count
| where action.name != "search"
| rename count as "操作总次数",error as "错误次数",action.name as "操作类型"

```
- X轴选择操作类型，Y轴柱形字段选择操作总次数、折线字段选择错误次数，绘制簇状柱形图+折线图组合图
![image.png](https://dn-odum9helk.qbox.me/FqW8fKbYTg5a3qljas3YoNw-He45)

2、查询最近7天除搜索外操作的所有操作类型的操作次数，且操作成功与失败区分显示。同时呈现不同操作类型操作次数的趋势
```
repo="_internal"
| where action.name != "search"
| eval response.statusName=if(response.statusName="OK",0,1)
| stats count() as count by action.name,response.statusName
| eventstats sum(count) as total_count by action.name 
| sort by count
| rename count as "操作次数",action.name as "操作类型",response.statusName as "操作结果",total_count as "操作总次数"
```
- X轴选择操作类型，Y轴柱形字段选择操作次数、折线字段选择操作总次数，分组字段选择操作结果。绘制簇状柱形图+折线图组合图
- 在图表样式中设置折线图的拐点为圆，且显示值标签，能更加清晰呈现为每个操作类型下的操作总次数
- 修改登录失败的柱形颜色为橙色，能够更加明显呈现登录失败情况
![image.png](https://dn-odum9helk.qbox.me/FuvwbWgf9z2OMSP5iSbLnNTylk5i)


