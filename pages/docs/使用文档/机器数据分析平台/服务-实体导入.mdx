对于服务和实体，都可以设置定时导入与更新。通过服务导入可以实现服务topo结构自动导入，无需用户手动一个一个去创建服务，如果你已经有服务topo结构的数据则可以直接导入。对于实体导入可以实现实体的自发现与更新，例如您可以直接将您的机器管理数据同步到Pandora，然后导入为实体。同时，若您同时导入服务与实体，我们也会导入服务与实体之间的关系。这对于从您已有的CMDB数据中直接导入应用与机器以及应用与机器之间的关系是友好的。
服务/实体导入包括导入任务管理和运行任务管理。

## **导入任务**
### **新建导入任务**
服务/实体导入一共有3步：选择数据源、指定导入信息、设置定时导入。支持用户从搜索、数据集、CSV中导入服务/实体，无需固定的文件格式，主要思想是将常规的表格结构转化为服务/实体结构。

 **Step1:选择数据源**
支持输入搜索语句或选择数据集、上传CSV文件选择数据源：
注意CSV文件需要用逗号（，）进行隔开。

**Step2:指定导入信息**
通过第二步确定导入信息，可以选择选择字段指定列信息，可以指定列作为服务或者实体的相关配置项，支持批量操作。具体如下：

服务：
- 服务名称：最多只能选择一列作为服务标题，（在导入时，服务名称和服务名称至少选择一个，即可以只导入服务或者只导入实体）选择后当前列作为一个服务进行创建。
- 依赖服务：可选择0个或者1个列作为依赖服务，选择后当前列的值作为服务的依赖服务。选择了依赖服务必须要选择列为服务名称才能进行导入。
- 服务描述：可选择0个或者1个列作为服务描述，选择后当前列的值作为服务的描述信息。
- 服务标签：可选择0个或者多个列作为服务的标签，选择后列值作为服务的标签值


实体：
- 实体名称：有且只能选择一个列作为实体名称，且选择后，会同时作为一个匹配条件。例如：对于选择IP列作为实体标题，则在新建实体的时候，每一个新的IP值都会作为一个新的实体标题进行新建，同时IP=IP值会作为当前实体的一个匹配条件
- 实体描述：可选择0个或者1个列作为实体描述，选择后当前列的值作为实体的描述信息。
- 实体匹配条件：可选择0个或者多个列作为实体的匹配条件（因为选择实体标题后，会同时作为一个匹配条件，即保证了实体至少具有一个匹配条件），选择后列名称=列值作为实体匹配条件的K-V。
- 实体属性（默认）：可选择0个或者多个列作为实体的属性，选择后列名称=列值作为实体属性的K-V。
- 实体标签：可选择0个或者多个列作为实体的标签，选择后列值作为实体的标签值
- 不导入：即该列不作为新建实体的任何信息。


另外，可以给所有服务/实体共同添加标签。导入时如果导入了服务需要选择服务依赖关系更改解决方式；如果导入了实体，需要选择重复实体解决方式；如果既选择了服务又选择了实体，则还需要选择服务与实体关系更改解决方式。

服务依赖关系更改解决方式：当选择的服务列的时候出现此配置项，即如果现在的服务依赖关系与原有依赖关系不一样的时候，处理的方式，可选择合并依赖关系和替换依赖关系
- 合并服务依赖关系：保持之前的依赖关系不变，如有新的依赖关系，则添加到原有服务上。如原有依赖关系为（s1-s2；s2-s3）；现有数据依赖关系为（s1-s2；s1-s3），则替换后服务的依赖关系为：（s1-s2；s2-s3；s1-s3）
- 替换服务依赖关系：替换原有的依赖关系，如原有依赖关系为（s1-s2；s2-s3）；现有数据依赖关系为（s1-s2；s1-s3），则替换后服务的依赖关系为：（s1-s2；s1-s3）


服务与实体关系冲突解决方式：当同时选择了服务和实体列的时候出现此配置项，即服务名称相同的时候，实体名称不同，解决此冲突的方式。可选择跳过、替换、合并现有服务的筛选条件
- 合并现有服务的筛选条件：添加新的筛选条件在原有的筛选条件上，如原有pandor服务的筛选条件为实体名称 匹配 cs21,新增一个服务同样为smartelf，但是实体名称为csnew，则筛选条件更新为：实体名称 匹配 cs21,csnew
- 替换现有服务的筛选条件：替换原有的筛选条件，如原有smartelf服务的筛选条件为实体名称 匹配 cs21，新增一个服务同样为smartelf，但是实体名称为csnew，则筛选条件替换为：实体名称 匹配 csnew
- 跳过现有服务的筛选条件：保持原有的筛选条件不变，如原有smartelf服务的筛选条件为实体名称 匹配 cs21，新增一个服务同样为smartelf，但是实体名称为csnew，则筛选条件仍然保持为：实体名称 匹配 cs21

重复实体解决方式：当选择了实体列的时候出现此配置项，即如果实体名称相同的时候，解决此冲突的方式。可选择跳过现有实体、替换现有实体、合并现有实体 
- 跳过现有实体：仅当实体尚不存在时，为数据存储添加新的实体数据。如果实体存在，则不会更新信息。
- 替换现有实体：如果实体名称相同，则用新的实体数据替换现有的实体数据。
- 合并现有实体：将导入实体的匹配条件和属性字段与现有实体合并。

指定完导入列之后，可以预览会导入的服务和实体数据。包括服务依赖关系、服务列表和实体列表。

**Step3:设置定时导入**
对于数据源为搜索或者数据集的任务，对于数据源为文件的数据，不支持设置定时导入。配置定时导入时，需要指定任务名称和运行频率
对于CSV文件的数据，点击导入后，如果导入的时候出现格式或者数据库错误，被替换的实体或者跳过未导入的实体，都可下载进行修改后重新导入。

### **管理导入任务**
对于导入任务，可以对任务进行停止/启动、编辑、查看运行记录和删除。支持批量启用/停止、删除

## **运行记录**
运行记录可以查看所有导入任务的记录信息，可以筛选查看单个任务的运行记录。对于单条记录，可以查看器数据源、导入时间、耗时、导入结果，也可以跳转到数据源查看单次导入的时候导入的服务/实体

