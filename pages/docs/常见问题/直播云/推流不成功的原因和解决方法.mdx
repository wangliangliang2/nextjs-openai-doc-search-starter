一般来说，推流不成功的原因可以从以下几点着手开始排查：  
1. 推流地址错误  
2. 连接服务器失败

# 推流地址错误
七牛的 rtmp 推流地址默认需要鉴权，也就是合法的签算地址才能够正确的推流，否则都会被服务器直接 deny，鉴权方式可以参考[七牛直播推流鉴权](https://developer.qiniu.com/pili/kb/1332/broadcast-authentication-mode) 。

# 连接服务器失败
1) rtmp 协议默认使用的端口是 1935，客户端使用我们的 sdk 一般不会出现端口问题，如果使用服务器推流，请检查是否是 1935 没有被防火墙放行，如果没有放行，就会出现连接不到七牛服务器的问题

2) 使用 sdk 推流，出现连接服务器失败，可以使用我们的[网络检测工具](https://developer.qiniu.com/fusion/kb/1324/mobile-terminal-network-test-tool-android-ios) 测试一下你们的推流域名，是否正确的解析

![](https://dn-odum9helk.qbox.me/Fs9uZVO_s66ItC2aG6DT5oS0dxlz)

看下**TCP连接**是否有节点数据返回，例如图中返回了 180.97.72.163，如果没有节点信息返回，建议换一个网络，比如换成 4G 进行测试；如果有信息返回，依旧推流不成功，可以[提交工单](https://support.qiniu.com/)联系我们。  提交工单时可以将用户访问这个链接的情况[DNS检测](http://net.qiniuts.com/#/)和对应的客户端推流log也一并打印下加快排查进度

3) pc 端使用 OBS 推流，如果出现推流失败原因，可以先 ping 一下您的域名，看下是否通过，如果通不过，报错 unknown host，则是网络问题，可以修改 dns 为 180.76.76.76 然后测试；如果可以通过，麻烦检查一下推流地址是否过期，或者不合法，另外，OBS 填写规则是否有问题  

![](https://dn-odum9helk.qbox.me/FqT_kD-gF3lv4iv6NxfEk9ZQp6fj)

4) 推流域名都是需要做CNAME解析之后才可以使用的，刚开始使用时可以 dig 一下推流和播放域名看看解析的情况，如果域名运营商后台已经做好了配置，但是查询不到解析的话需要联系域名运营商进行帮忙查看。
# 七牛的直播抢流
七牛直播云的的一个 url 默认只能同时被一个客户端使用，后一个推流的会挤掉前一个推流，为防止抢流，可以使用 dynamic 鉴权，推一次地址便失效。出现抢流时推流端的表象就是一直会有断开重推的一个情况